From c663df089af7b811cbd6e435011622c127520700 Mon Sep 17 00:00:00 2001
From: yumingyang <yumingyang@xiaomi.com>
Date: Wed, 13 Mar 2013 19:30:34 +0800
Subject: [PATCH 05/10] add miui hook for v5 into framework

Change-Id: I8cee220837032bc13c7940677ba117e7b02cc3eb

Signed-off-by: santajin <zj1860263@163.com>
---
 framework.jar.out/smali/android/app/Activity.smali |   43 ++-
 .../android/app/ApplicationPackageManager.smali    |   45 ++-
 framework.jar.out/smali/android/app/Dialog.smali   |   39 +-
 .../smali/android/app/ProgressDialog.smali         |    6 +
 .../smali/android/app/SearchDialog.smali           |   65 ++++
 .../smali/android/app/StatusBarManager.smali       |   39 ++
 .../smali/android/content/pm/PackageItemInfo.smali |    4 -
 .../pm/ResolveInfo$DisplayNameComparator.smali     |   10 +-
 .../android/content/res/Resources$Theme.smali      |   32 +-
 .../smali/android/content/res/Resources.smali      |   30 +-
 .../graphics/drawable/AnimatedRotateDrawable.smali |    8 +
 .../smali/android/graphics/drawable/Drawable.smali |   35 ++
 .../DrawableContainer$DrawableContainerState.smali |   12 +
 .../android/preference/CheckBoxPreference.smali    |    2 +-
 .../smali/android/preference/Preference.smali      |   21 ++
 .../PreferenceActivity$HeaderAdapter.smali         |   14 +-
 .../android/preference/PreferenceActivity.smali    |    2 +
 .../PreferenceFrameLayout$LayoutParams.smali       |    8 +
 .../smali/android/preference/PreferenceGroup.smali |    2 +
 .../android/preference/PreferenceScreen.smali      |    8 +
 .../android/preference/RingtonePreference.smali    |    2 +-
 .../speech/tts/TextToSpeech$Connection.smali       |   30 ++
 .../smali/android/speech/tts/TextToSpeech.smali    |   27 ++
 .../smali/android/telephony/PhoneNumberUtils.smali |    2 +-
 .../smali/android/util/TypedValue.smali            |   48 ++-
 .../smali/android/view/LayoutInflater.smali        |    8 +
 framework.jar.out/smali/android/view/View.smali    |   73 ++++
 .../smali/android/view/ViewConfiguration.smali     |   30 ++
 .../smali/android/view/ViewGroup.smali             |   39 ++
 .../android/widget/AbsListView$FlingRunnable.smali |   27 ++
 .../smali/android/widget/AbsListView.smali         |   51 ++-
 .../smali/android/widget/CompoundButton.smali      |  211 +++++++++++
 .../smali/android/widget/DatePicker.smali          |  153 +++++++-
 .../smali/android/widget/EdgeEffect.smali          |    8 +-
 .../smali/android/widget/NumberPicker.smali        |  372 +++++++++++++++++++-
 .../smali/android/widget/PopupWindow.smali         |   26 +-
 .../smali/android/widget/ProgressBar.smali         |  100 ++++++
 .../smali/android/widget/QuickContactBadge.smali   |    8 +
 .../smali/android/widget/SearchView.smali          |  171 +++++++++
 .../smali/android/widget/TextView.smali            |   57 ++-
 .../smali/android/widget/TimePicker.smali          |   40 +++
 .../com/android/internal/app/ActionBarImpl.smali   |  257 +++++++++++++-
 .../app/ResolverActivity$ResolveListAdapter.smali  |   20 ++
 .../android/internal/app/ResolverActivity.smali    |   62 +++-
 .../internal/statusbar/IStatusBar$Stub$Proxy.smali |   71 ++++
 .../internal/statusbar/IStatusBar$Stub.smali       |   45 +++
 .../android/internal/statusbar/IStatusBar.smali    |    8 +
 .../statusbar/IStatusBarService$Stub$Proxy.smali   |   83 +++++
 .../statusbar/IStatusBarService$Stub.smali         |   58 +++
 .../internal/statusbar/IStatusBarService.smali     |    8 +
 .../internal/telephony/WapPushOverSms.smali        |    8 +-
 .../internal/view/menu/ListMenuItemView.smali      |   36 ++
 .../android/internal/view/menu/MenuBuilder.smali   |   48 +++
 .../internal/widget/ActionBarContainer.smali       |   75 ++--
 .../internal/widget/ActionBarContextView.smali     |  108 ++++++
 ...onBarView$ExpandedActionViewMenuPresenter.smali |   20 +-
 .../android/internal/widget/ActionBarView.smali    |  330 ++++++++++++++---
 .../android/internal/widget/LockPatternUtils.smali |   34 +-
 ...crollingTabContainerView$TabClickListener.smali |    4 +
 .../widget/ScrollingTabContainerView.smali         |   28 +-
 .../GlowPadView$AnimationBundle.smali              |    2 +-
 61 files changed, 2986 insertions(+), 227 deletions(-)

diff --git a/framework.jar.out/smali/android/app/Activity.smali b/framework.jar.out/smali/android/app/Activity.smali
index 371ce25..623f3b0 100644
--- a/framework.jar.out/smali/android/app/Activity.smali
+++ b/framework.jar.out/smali/android/app/Activity.smali
@@ -354,9 +354,9 @@
     return-void
 
     :cond_1
-    new-instance v1, Lcom/android/internal/app/ActionBarImpl;
+    invoke-static {p0}, Landroid/app/Activity$Injector;->generateActionBar(Landroid/app/Activity;)Lcom/android/internal/app/ActionBarImpl;
 
-    invoke-direct {v1, p0}, Lcom/android/internal/app/ActionBarImpl;-><init>(Landroid/app/Activity;)V
+    move-result-object v1
 
     iput-object v1, p0, Landroid/app/Activity;->mActionBar:Lcom/android/internal/app/ActionBarImpl;
 
@@ -2288,6 +2288,35 @@
     goto :goto_0
 .end method
 
+.method public getMiuiActionBar()Lmiui/v5/app/MiuiActionBar;
+    .locals 2
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    invoke-virtual {p0}, Landroid/app/Activity;->getActionBar()Landroid/app/ActionBar;
+
+    move-result-object v0
+
+    .local v0, bar:Landroid/app/ActionBar;
+    instance-of v1, v0, Lmiui/v5/app/MiuiActionBar;
+
+    if-eqz v1, :cond_0
+
+    check-cast v0, Lmiui/v5/app/MiuiActionBar;
+
+    .end local v0           #bar:Landroid/app/ActionBar;
+    :goto_0
+    return-object v0
+
+    .restart local v0       #bar:Landroid/app/ActionBar;
+    :cond_0
+    const/4 v0, 0x0
+
+    goto :goto_0
+.end method
+
 .method public final getParent()Landroid/app/Activity;
     .locals 1
 
@@ -3263,6 +3292,8 @@
 
     iput-boolean v3, p0, Landroid/app/Activity;->mCalled:Z
 
+    invoke-static {p0}, Landroid/app/Activity$Injector;->setActivityGravity(Landroid/app/Activity;)V
+
     return-void
 
     :cond_3
@@ -4566,7 +4597,9 @@
     return v0
 
     :cond_0
-    const/4 v0, 0x0
+    invoke-static {p0, p1}, Landroid/app/Activity$Injector;->onOptionsItemSelected(Landroid/app/Activity;Landroid/view/MenuItem;)Z
+
+    move-result v0
 
     goto :goto_0
 .end method
@@ -5310,6 +5343,8 @@
     .prologue
     const/4 v2, 0x0
 
+    invoke-static {p0}, Landroid/app/Activity$Injector;->onWindowHide(Landroid/app/Activity;)V
+
     iget-object v0, p0, Landroid/app/Activity;->mFragments:Landroid/app/FragmentManagerImpl;
 
     invoke-virtual {v0}, Landroid/app/FragmentManagerImpl;->dispatchPause()V
@@ -5722,6 +5757,8 @@
     throw v0
 
     :cond_1
+    invoke-static {p0}, Landroid/app/Activity$Injector;->onWindowShow(Landroid/app/Activity;)V
+
     return-void
 .end method
 
diff --git a/framework.jar.out/smali/android/app/ApplicationPackageManager.smali b/framework.jar.out/smali/android/app/ApplicationPackageManager.smali
index cbf3f5d..e09ff72 100644
--- a/framework.jar.out/smali/android/app/ApplicationPackageManager.smali
+++ b/framework.jar.out/smali/android/app/ApplicationPackageManager.smali
@@ -133,12 +133,9 @@
     throw v0
 .end method
 
-.method static getCachedIcon(Landroid/app/ApplicationPackageManager$ResourceName;)Landroid/graphics/drawable/Drawable;
+.method private getCachedIcon(Landroid/app/ApplicationPackageManager$ResourceName;)Landroid/graphics/drawable/Drawable;
     .locals 4
     .parameter "name"
-    .annotation build Landroid/annotation/MiuiHook;
-        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->CHANGE_ACCESS:Landroid/annotation/MiuiHook$MiuiHookType;
-    .end annotation
 
     .prologue
     sget-object v3, Landroid/app/ApplicationPackageManager;->sSync:Ljava/lang/Object;
@@ -148,7 +145,7 @@
     :try_start_0
     sget-object v2, Landroid/app/ApplicationPackageManager;->sIconCache:Ljava/util/HashMap;
 
-    invoke-virtual {v2, p0}, Ljava/util/HashMap;->get(Ljava/lang/Object;)Ljava/lang/Object;
+    invoke-virtual {v2, p1}, Ljava/util/HashMap;->get(Ljava/lang/Object;)Ljava/lang/Object;
 
     move-result-object v1
 
@@ -180,7 +177,7 @@
     :cond_0
     sget-object v2, Landroid/app/ApplicationPackageManager;->sIconCache:Ljava/util/HashMap;
 
-    invoke-virtual {v2, p0}, Ljava/util/HashMap;->remove(Ljava/lang/Object;)Ljava/lang/Object;
+    invoke-virtual {v2, p1}, Ljava/util/HashMap;->remove(Ljava/lang/Object;)Ljava/lang/Object;
 
     .end local v0           #state:Landroid/graphics/drawable/Drawable$ConstantState;
     :cond_1
@@ -462,13 +459,10 @@
     goto :goto_3
 .end method
 
-.method static putCachedIcon(Landroid/app/ApplicationPackageManager$ResourceName;Landroid/graphics/drawable/Drawable;)V
+.method private putCachedIcon(Landroid/app/ApplicationPackageManager$ResourceName;Landroid/graphics/drawable/Drawable;)V
     .locals 4
     .parameter "name"
     .parameter "dr"
-    .annotation build Landroid/annotation/MiuiHook;
-        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->CHANGE_ACCESS:Landroid/annotation/MiuiHook$MiuiHookType;
-    .end annotation
 
     .prologue
     sget-object v1, Landroid/app/ApplicationPackageManager;->sSync:Ljava/lang/Object;
@@ -480,13 +474,13 @@
 
     new-instance v2, Ljava/lang/ref/WeakReference;
 
-    invoke-virtual {p1}, Landroid/graphics/drawable/Drawable;->getConstantState()Landroid/graphics/drawable/Drawable$ConstantState;
+    invoke-virtual {p2}, Landroid/graphics/drawable/Drawable;->getConstantState()Landroid/graphics/drawable/Drawable$ConstantState;
 
     move-result-object v3
 
     invoke-direct {v2, v3}, Ljava/lang/ref/WeakReference;-><init>(Ljava/lang/Object;)V
 
-    invoke-virtual {v0, p0, v2}, Ljava/util/HashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
+    invoke-virtual {v0, p1, v2}, Ljava/util/HashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
 
     monitor-exit v1
 
@@ -1400,17 +1394,30 @@
     goto :goto_0
 .end method
 
+.method getContext()Landroid/app/ContextImpl;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Landroid/app/ApplicationPackageManager;->mContext:Landroid/app/ContextImpl;
+
+    return-object v0
+.end method
+
 .method public getDefaultActivityIcon()Landroid/graphics/drawable/Drawable;
     .locals 2
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->CHANGE_CODE:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
 
     .prologue
-    invoke-static {}, Landroid/content/res/Resources;->getSystem()Landroid/content/res/Resources;
-
-    move-result-object v0
+    iget-object v0, p0, Landroid/app/ApplicationPackageManager;->mContext:Landroid/app/ContextImpl;
 
-    const v1, 0x1080093
+    const-string v1, "sym_def_app_icon.png"
 
-    invoke-virtual {v0, v1}, Landroid/content/res/Resources;->getDrawable(I)Landroid/graphics/drawable/Drawable;
+    invoke-static {v0, v1}, Lmiui/content/res/IconCustomizer;->getCustomizedIcon(Landroid/content/Context;Ljava/lang/String;)Landroid/graphics/drawable/BitmapDrawable;
 
     move-result-object v0
 
@@ -1431,7 +1438,7 @@
     invoke-direct {v2, p1, p2}, Landroid/app/ApplicationPackageManager$ResourceName;-><init>(Ljava/lang/String;I)V
 
     .local v2, name:Landroid/app/ApplicationPackageManager$ResourceName;
-    invoke-static {v2}, Landroid/app/ApplicationPackageManager;->getCachedIcon(Landroid/app/ApplicationPackageManager$ResourceName;)Landroid/graphics/drawable/Drawable;
+    invoke-direct {p0, v2}, Landroid/app/ApplicationPackageManager;->getCachedIcon(Landroid/app/ApplicationPackageManager$ResourceName;)Landroid/graphics/drawable/Drawable;
 
     move-result-object v0
 
@@ -1466,7 +1473,7 @@
 
     move-result-object v0
 
-    invoke-static {v2, v0}, Landroid/app/ApplicationPackageManager;->putCachedIcon(Landroid/app/ApplicationPackageManager$ResourceName;Landroid/graphics/drawable/Drawable;)V
+    invoke-direct {p0, v2, v0}, Landroid/app/ApplicationPackageManager;->putCachedIcon(Landroid/app/ApplicationPackageManager$ResourceName;Landroid/graphics/drawable/Drawable;)V
     :try_end_1
     .catch Landroid/content/pm/PackageManager$NameNotFoundException; {:try_start_1 .. :try_end_1} :catch_1
     .catch Landroid/content/res/Resources$NotFoundException; {:try_start_1 .. :try_end_1} :catch_2
diff --git a/framework.jar.out/smali/android/app/Dialog.smali b/framework.jar.out/smali/android/app/Dialog.smali
index be4bd4c..e0ca3c4 100644
--- a/framework.jar.out/smali/android/app/Dialog.smali
+++ b/framework.jar.out/smali/android/app/Dialog.smali
@@ -197,6 +197,8 @@
 
     iput-object v2, p0, Landroid/app/Dialog;->mListenersHandler:Landroid/os/Handler;
 
+    invoke-static {p0, p2}, Landroid/app/Dialog$Injector;->setDialogGravity(Landroid/app/Dialog;I)V
+
     return-void
 
     .end local v1           #w:Landroid/view/Window;
@@ -477,6 +479,8 @@
     iget-object v1, p0, Landroid/app/Dialog;->mDecor:Landroid/view/View;
 
     invoke-interface {v0, v1}, Landroid/view/WindowManager;->removeView(Landroid/view/View;)V
+
+    invoke-static {p0}, Landroid/app/Dialog$Injector;->onWindowHide(Landroid/app/Dialog;)V
     :try_end_0
     .catchall {:try_start_0 .. :try_end_0} :catchall_0
 
@@ -845,6 +849,35 @@
     return-object v0
 .end method
 
+.method public getMiuiActionBar()Lmiui/v5/app/MiuiActionBar;
+    .locals 2
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    invoke-virtual {p0}, Landroid/app/Dialog;->getActionBar()Landroid/app/ActionBar;
+
+    move-result-object v0
+
+    .local v0, bar:Landroid/app/ActionBar;
+    instance-of v1, v0, Lmiui/v5/app/MiuiActionBar;
+
+    if-eqz v1, :cond_0
+
+    check-cast v0, Lmiui/v5/app/MiuiActionBar;
+
+    .end local v0           #bar:Landroid/app/ActionBar;
+    :goto_0
+    return-object v0
+
+    .restart local v0       #bar:Landroid/app/ActionBar;
+    :cond_0
+    const/4 v0, 0x0
+
+    goto :goto_0
+.end method
+
 .method public final getOwnerActivity()Landroid/app/Activity;
     .locals 1
 
@@ -2038,9 +2071,9 @@
 
     if-eqz v2, :cond_4
 
-    new-instance v2, Lcom/android/internal/app/ActionBarImpl;
+    invoke-static {p0}, Landroid/app/Dialog$Injector;->generateActionBar(Landroid/app/Dialog;)Lcom/android/internal/app/ActionBarImpl;
 
-    invoke-direct {v2, p0}, Lcom/android/internal/app/ActionBarImpl;-><init>(Landroid/app/Dialog;)V
+    move-result-object v2
 
     iput-object v2, p0, Landroid/app/Dialog;->mActionBar:Lcom/android/internal/app/ActionBarImpl;
 
@@ -2087,6 +2120,8 @@
     iput-boolean v2, p0, Landroid/app/Dialog;->mShowing:Z
 
     invoke-direct {p0}, Landroid/app/Dialog;->sendShowMessage()V
+
+    invoke-static {p0}, Landroid/app/Dialog$Injector;->onWindowShow(Landroid/app/Dialog;)V
     :try_end_0
     .catchall {:try_start_0 .. :try_end_0} :catchall_0
 
diff --git a/framework.jar.out/smali/android/app/ProgressDialog.smali b/framework.jar.out/smali/android/app/ProgressDialog.smali
index a76094e..99a1459 100644
--- a/framework.jar.out/smali/android/app/ProgressDialog.smali
+++ b/framework.jar.out/smali/android/app/ProgressDialog.smali
@@ -641,6 +641,12 @@
 
     invoke-virtual {p0, v2}, Landroid/app/ProgressDialog;->setView(Landroid/view/View;)V
 
+    iget-object v3, p0, Landroid/app/ProgressDialog;->mContext:Landroid/content/Context;
+
+    iget-object v4, p0, Landroid/app/ProgressDialog;->mMessageView:Landroid/widget/TextView;
+
+    invoke-static {p0, v3, v4}, Landroid/app/ProgressDialog$Injector;->usingV5Style(Landroid/app/ProgressDialog;Landroid/content/Context;Landroid/widget/TextView;)V
+
     goto :goto_0
 .end method
 
diff --git a/framework.jar.out/smali/android/app/SearchDialog.smali b/framework.jar.out/smali/android/app/SearchDialog.smali
index a6605d6..72f74a9 100644
--- a/framework.jar.out/smali/android/app/SearchDialog.smali
+++ b/framework.jar.out/smali/android/app/SearchDialog.smali
@@ -614,6 +614,62 @@
     goto :goto_0
 .end method
 
+.method private miuiUpdateSearchAppIcon()Z
+    .locals 6
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    const/4 v1, 0x0
+
+    .local v1, retval:Z
+    iget-object v2, p0, Landroid/app/SearchDialog;->mContext:Landroid/content/Context;
+
+    invoke-static {v2}, Lmiui/util/UiUtils;->isV5Ui(Landroid/content/Context;)Z
+
+    move-result v2
+
+    if-eqz v2, :cond_0
+
+    iget-object v2, p0, Landroid/app/SearchDialog;->mAppIcon:Landroid/widget/ImageView;
+
+    const/16 v3, 0x8
+
+    invoke-virtual {v2, v3}, Landroid/widget/ImageView;->setVisibility(I)V
+
+    iget-object v2, p0, Landroid/app/SearchDialog;->mCloseSearch:Landroid/view/View;
+
+    invoke-virtual {v2}, Landroid/view/View;->getParent()Landroid/view/ViewParent;
+
+    move-result-object v0
+
+    check-cast v0, Landroid/view/ViewGroup;
+
+    .local v0, parent:Landroid/view/ViewGroup;
+    const/4 v2, 0x0
+
+    invoke-virtual {v0}, Landroid/view/ViewGroup;->getPaddingTop()I
+
+    move-result v3
+
+    invoke-virtual {v0}, Landroid/view/ViewGroup;->getPaddingRight()I
+
+    move-result v4
+
+    invoke-virtual {v0}, Landroid/view/ViewGroup;->getPaddingBottom()I
+
+    move-result v5
+
+    invoke-virtual {v0, v2, v3, v4, v5}, Landroid/view/ViewGroup;->setPadding(IIII)V
+
+    const/4 v1, 0x1
+
+    .end local v0           #parent:Landroid/view/ViewGroup;
+    :cond_0
+    return v1
+.end method
+
 .method private onClosePressed()Z
     .locals 1
 
@@ -776,6 +832,15 @@
     .prologue
     const/4 v7, 0x0
 
+    invoke-direct {p0}, Landroid/app/SearchDialog;->miuiUpdateSearchAppIcon()Z
+
+    move-result v4
+
+    if-eqz v4, :cond_miui_0
+
+    return-void
+
+    :cond_miui_0
     invoke-virtual {p0}, Landroid/app/SearchDialog;->getContext()Landroid/content/Context;
 
     move-result-object v4
diff --git a/framework.jar.out/smali/android/app/StatusBarManager.smali b/framework.jar.out/smali/android/app/StatusBarManager.smali
index f2eacda..21b56fc 100644
--- a/framework.jar.out/smali/android/app/StatusBarManager.smali
+++ b/framework.jar.out/smali/android/app/StatusBarManager.smali
@@ -334,3 +334,42 @@
 
     throw v2
 .end method
+
+.method public setStatus(ILjava/lang/String;Landroid/os/Bundle;)V
+    .locals 3
+    .parameter "what"
+    .parameter "action"
+    .parameter "ext"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    :try_start_0
+    invoke-direct {p0}, Landroid/app/StatusBarManager;->getService()Lcom/android/internal/statusbar/IStatusBarService;
+
+    move-result-object v1
+
+    .local v1, svc:Lcom/android/internal/statusbar/IStatusBarService;
+    if-eqz v1, :cond_0
+
+    iget-object v2, p0, Landroid/app/StatusBarManager;->mToken:Landroid/os/IBinder;
+
+    invoke-interface {v1, p1, v2, p2, p3}, Lcom/android/internal/statusbar/IStatusBarService;->setStatus(ILandroid/os/IBinder;Ljava/lang/String;Landroid/os/Bundle;)V
+    :try_end_0
+    .catch Landroid/os/RemoteException; {:try_start_0 .. :try_end_0} :catch_0
+
+    :cond_0
+    return-void
+
+    .end local v1           #svc:Lcom/android/internal/statusbar/IStatusBarService;
+    :catch_0
+    move-exception v0
+
+    .local v0, ex:Landroid/os/RemoteException;
+    new-instance v2, Ljava/lang/RuntimeException;
+
+    invoke-direct {v2, v0}, Ljava/lang/RuntimeException;-><init>(Ljava/lang/Throwable;)V
+
+    throw v2
+.end method
diff --git a/framework.jar.out/smali/android/content/pm/PackageItemInfo.smali b/framework.jar.out/smali/android/content/pm/PackageItemInfo.smali
index 91368a0..bad7fa2 100644
--- a/framework.jar.out/smali/android/content/pm/PackageItemInfo.smali
+++ b/framework.jar.out/smali/android/content/pm/PackageItemInfo.smali
@@ -349,10 +349,6 @@
     .end annotation
 
     .prologue
-    iget v1, p0, Landroid/content/pm/PackageItemInfo;->icon:I
-
-    if-eqz v1, :cond_0
-
     iget-object v1, p0, Landroid/content/pm/PackageItemInfo;->packageName:Ljava/lang/String;
 
     iget v2, p0, Landroid/content/pm/PackageItemInfo;->icon:I
diff --git a/framework.jar.out/smali/android/content/pm/ResolveInfo$DisplayNameComparator.smali b/framework.jar.out/smali/android/content/pm/ResolveInfo$DisplayNameComparator.smali
index 1c39869..24e2f2e 100644
--- a/framework.jar.out/smali/android/content/pm/ResolveInfo$DisplayNameComparator.smali
+++ b/framework.jar.out/smali/android/content/pm/ResolveInfo$DisplayNameComparator.smali
@@ -90,15 +90,7 @@
     :cond_1
     iget-object v2, p0, Landroid/content/pm/ResolveInfo$DisplayNameComparator;->sCollator:Ljava/text/Collator;
 
-    invoke-virtual {v0}, Ljava/lang/Object;->toString()Ljava/lang/String;
-
-    move-result-object v3
-
-    invoke-virtual {v1}, Ljava/lang/Object;->toString()Ljava/lang/String;
-
-    move-result-object v4
-
-    invoke-virtual {v2, v3, v4}, Ljava/text/Collator;->compare(Ljava/lang/String;Ljava/lang/String;)I
+    invoke-static {v2, p1, v0, p2, v1}, Landroid/content/pm/ResolveInfo$Injector;->compare(Ljava/text/Collator;Landroid/content/pm/ResolveInfo;Ljava/lang/CharSequence;Landroid/content/pm/ResolveInfo;Ljava/lang/CharSequence;)I
 
     move-result v2
 
diff --git a/framework.jar.out/smali/android/content/res/Resources$Theme.smali b/framework.jar.out/smali/android/content/res/Resources$Theme.smali
index 533cfa4..197e696 100644
--- a/framework.jar.out/smali/android/content/res/Resources$Theme.smali
+++ b/framework.jar.out/smali/android/content/res/Resources$Theme.smali
@@ -1,19 +1,15 @@
-.class public Landroid/content/res/Resources$Theme;
+.class public final Landroid/content/res/Resources$Theme;
 .super Ljava/lang/Object;
 .source "Resources.java"
 
 
 # annotations
-.annotation build Landroid/annotation/MiuiHook;
-    value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->CHANGE_ACCESS:Landroid/annotation/MiuiHook$MiuiHookType;
-.end annotation
-
 .annotation system Ldalvik/annotation/EnclosingClass;
     value = Landroid/content/res/Resources;
 .end annotation
 
 .annotation system Ldalvik/annotation/InnerClass;
-    accessFlags = 0x1
+    accessFlags = 0x11
     name = "Theme"
 .end annotation
 
@@ -140,7 +136,13 @@
 
     invoke-static/range {v0 .. v6}, Landroid/content/res/AssetManager;->applyStyle(IIII[I[I[I)Z
 
-    return-object v7
+    iget-object v0, p0, Landroid/content/res/Resources$Theme;->this$0:Landroid/content/res/Resources;
+
+    invoke-virtual {v0, v7}, Landroid/content/res/Resources;->loadOverlayTypedArray(Landroid/content/res/TypedArray;)Landroid/content/res/TypedArray;
+
+    move-result-object v0
+
+    return-object v0
 .end method
 
 .method public obtainStyledAttributes(Landroid/util/AttributeSet;[III)Landroid/content/res/TypedArray;
@@ -190,7 +192,13 @@
 
     iput-object v9, v7, Landroid/content/res/TypedArray;->mXml:Landroid/content/res/XmlBlock$Parser;
 
-    return-object v7
+    iget-object v0, p0, Landroid/content/res/Resources$Theme;->this$0:Landroid/content/res/Resources;
+
+    invoke-virtual {v0, v7}, Landroid/content/res/Resources;->loadOverlayTypedArray(Landroid/content/res/TypedArray;)Landroid/content/res/TypedArray;
+
+    move-result-object v0
+
+    return-object v0
 
     :cond_0
     const/4 v3, 0x0
@@ -232,7 +240,13 @@
 
     invoke-static/range {v0 .. v6}, Landroid/content/res/AssetManager;->applyStyle(IIII[I[I[I)Z
 
-    return-object v7
+    iget-object v0, p0, Landroid/content/res/Resources$Theme;->this$0:Landroid/content/res/Resources;
+
+    invoke-virtual {v0, v7}, Landroid/content/res/Resources;->loadOverlayTypedArray(Landroid/content/res/TypedArray;)Landroid/content/res/TypedArray;
+
+    move-result-object v0
+
+    return-object v0
 .end method
 
 .method public resolveAttribute(ILandroid/util/TypedValue;Z)Z
diff --git a/framework.jar.out/smali/android/content/res/Resources.smali b/framework.jar.out/smali/android/content/res/Resources.smali
index 1b07d25..b47de88 100644
--- a/framework.jar.out/smali/android/content/res/Resources.smali
+++ b/framework.jar.out/smali/android/content/res/Resources.smali
@@ -128,7 +128,7 @@
 
 .field private mPluralRule:Llibcore/icu/NativePluralRules;
 
-.field mPreloading:Z
+.field private mPreloading:Z
 
 .field final mTmpConfig:Landroid/content/res/Configuration;
 
@@ -3793,6 +3793,17 @@
     return-object v0
 .end method
 
+.method loadOverlayTypedArray(Landroid/content/res/TypedArray;)Landroid/content/res/TypedArray;
+    .locals 0
+    .parameter "array"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    return-object p1
+.end method
+
 .method loadXmlResourceParser(ILjava/lang/String;)Landroid/content/res/XmlResourceParser;
     .locals 5
     .parameter "id"
@@ -4142,11 +4153,8 @@
     throw v7
 .end method
 
-.method public newTheme()Landroid/content/res/Resources$Theme;
+.method public final newTheme()Landroid/content/res/Resources$Theme;
     .locals 1
-    .annotation build Landroid/annotation/MiuiHook;
-        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->CHANGE_ACCESS:Landroid/annotation/MiuiHook$MiuiHookType;
-    .end annotation
 
     .prologue
     new-instance v0, Landroid/content/res/Resources$Theme;
@@ -4189,7 +4197,11 @@
 
     iput-object v2, v0, Landroid/content/res/TypedArray;->mXml:Landroid/content/res/XmlBlock$Parser;
 
-    return-object v0
+    invoke-virtual {p0, v0}, Landroid/content/res/Resources;->loadOverlayTypedArray(Landroid/content/res/TypedArray;)Landroid/content/res/TypedArray;
+
+    move-result-object v3
+
+    return-object v3
 .end method
 
 .method public obtainTypedArray(I)Landroid/content/res/TypedArray;
@@ -4261,7 +4273,11 @@
 
     aput v4, v2, v4
 
-    return-object v0
+    invoke-virtual {p0, v0}, Landroid/content/res/Resources;->loadOverlayTypedArray(Landroid/content/res/TypedArray;)Landroid/content/res/TypedArray;
+
+    move-result-object v2
+
+    return-object v2
 .end method
 
 .method public openRawResource(I)Ljava/io/InputStream;
diff --git a/framework.jar.out/smali/android/graphics/drawable/AnimatedRotateDrawable.smali b/framework.jar.out/smali/android/graphics/drawable/AnimatedRotateDrawable.smali
index 7dc152b..6ebed6c 100644
--- a/framework.jar.out/smali/android/graphics/drawable/AnimatedRotateDrawable.smali
+++ b/framework.jar.out/smali/android/graphics/drawable/AnimatedRotateDrawable.smali
@@ -476,6 +476,14 @@
 
     invoke-virtual {v0, v14}, Landroid/graphics/drawable/AnimatedRotateDrawable;->setFramesDuration(I)V
 
+    move-object/from16 v0, p0
+
+    move-object/from16 v1, p1
+
+    move-object/from16 v2, p3
+
+    invoke-static {v0, v1, v2}, Landroid/graphics/drawable/AnimatedRotateDrawable$Injector;->init(Landroid/graphics/drawable/AnimatedRotateDrawable;Landroid/content/res/Resources;Landroid/util/AttributeSet;)V
+
     const/4 v14, 0x1
 
     const/4 v15, 0x0
diff --git a/framework.jar.out/smali/android/graphics/drawable/Drawable.smali b/framework.jar.out/smali/android/graphics/drawable/Drawable.smali
index 843f9e4..a7006ad 100644
--- a/framework.jar.out/smali/android/graphics/drawable/Drawable.smali
+++ b/framework.jar.out/smali/android/graphics/drawable/Drawable.smali
@@ -33,6 +33,12 @@
 
 .field private mChangingConfigurations:I
 
+.field mId:I
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_FIELD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+.end field
+
 .field private mLevel:I
 
 .field private mStateSet:[I
@@ -82,6 +88,10 @@
 
     iput-boolean v0, p0, Landroid/graphics/drawable/Drawable;->mVisible:Z
 
+    const/4 v0, -0x1
+
+    iput v0, p0, Landroid/graphics/drawable/Drawable;->mId:I
+
     return-void
 .end method
 
@@ -863,6 +873,18 @@
     return-object p0
 .end method
 
+.method public getId()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Landroid/graphics/drawable/Drawable;->mId:I
+
+    return v0
+.end method
+
 .method public getIntrinsicHeight()I
     .locals 1
 
@@ -1292,6 +1314,19 @@
     return-void
 .end method
 
+.method public setId(I)V
+    .locals 0
+    .parameter "id"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iput p1, p0, Landroid/graphics/drawable/Drawable;->mId:I
+
+    return-void
+.end method
+
 .method public final setLevel(I)Z
     .locals 1
     .parameter "level"
diff --git a/framework.jar.out/smali/android/graphics/drawable/DrawableContainer$DrawableContainerState.smali b/framework.jar.out/smali/android/graphics/drawable/DrawableContainer$DrawableContainerState.smali
index 8010f6c..ba1be1c 100644
--- a/framework.jar.out/smali/android/graphics/drawable/DrawableContainer$DrawableContainerState.smali
+++ b/framework.jar.out/smali/android/graphics/drawable/DrawableContainer$DrawableContainerState.smali
@@ -809,6 +809,18 @@
     goto :goto_0
 .end method
 
+.method public final getVariablePadding()Z
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-boolean v0, p0, Landroid/graphics/drawable/DrawableContainer$DrawableContainerState;->mVariablePadding:Z
+
+    return v0
+.end method
+
 .method public growArray(II)V
     .locals 3
     .parameter "oldSize"
diff --git a/framework.jar.out/smali/android/preference/CheckBoxPreference.smali b/framework.jar.out/smali/android/preference/CheckBoxPreference.smali
index f9b972c..1f2bd16 100644
--- a/framework.jar.out/smali/android/preference/CheckBoxPreference.smali
+++ b/framework.jar.out/smali/android/preference/CheckBoxPreference.smali
@@ -95,7 +95,7 @@
     .local v0, slidingButton:Lmiui/widget/SlidingButton;
     new-instance v1, Landroid/preference/CheckBoxPreference$1;
 
-    invoke-direct {v1, p0, v0}, Landroid/preference/CheckBoxPreference$1;-><init>(Landroid/preference/CheckBoxPreference;Lmiui/widget/SlidingButton;)V
+    invoke-direct {v1, p0}, Landroid/preference/CheckBoxPreference$1;-><init>(Landroid/preference/CheckBoxPreference;)V
 
     invoke-virtual {v0, v1}, Lmiui/widget/SlidingButton;->setOnCheckedChangedListener(Lmiui/widget/SlidingButton$OnCheckedChangedListener;)V
 
diff --git a/framework.jar.out/smali/android/preference/Preference.smali b/framework.jar.out/smali/android/preference/Preference.smali
index cfe3e79..fdb5b24 100644
--- a/framework.jar.out/smali/android/preference/Preference.smali
+++ b/framework.jar.out/smali/android/preference/Preference.smali
@@ -87,6 +87,12 @@
 
 .field private mPreferenceManager:Landroid/preference/PreferenceManager;
 
+.field mPreferenceParent:Landroid/preference/PreferenceGroup;
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_FIELD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+.end field
+
 .field private mRequiresKey:Z
 
 .field private mSelectable:Z
@@ -1562,6 +1568,8 @@
 
     const/4 v5, 0x0
 
+    invoke-static {p0, p1}, Landroid/preference/Preference$Injector;->onBindView(Landroid/preference/Preference;Landroid/view/View;)V
+
     const v7, 0x1020016
 
     invoke-virtual {p1, v7}, Landroid/view/View;->findViewById(I)Landroid/view/View;
@@ -2529,6 +2537,19 @@
     return-void
 .end method
 
+.method public setParent(Landroid/preference/PreferenceGroup;)V
+    .locals 0
+    .parameter "parent"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iput-object p1, p0, Landroid/preference/Preference;->mPreferenceParent:Landroid/preference/PreferenceGroup;
+
+    return-void
+.end method
+
 .method public setPersistent(Z)V
     .locals 0
     .parameter "persistent"
diff --git a/framework.jar.out/smali/android/preference/PreferenceActivity$HeaderAdapter.smali b/framework.jar.out/smali/android/preference/PreferenceActivity$HeaderAdapter.smali
index 779bfa0..40c74e7 100644
--- a/framework.jar.out/smali/android/preference/PreferenceActivity$HeaderAdapter.smali
+++ b/framework.jar.out/smali/android/preference/PreferenceActivity$HeaderAdapter.smali
@@ -81,11 +81,13 @@
 
     if-nez p2, :cond_0
 
-    iget-object v4, p0, Landroid/preference/PreferenceActivity$HeaderAdapter;->mInflater:Landroid/view/LayoutInflater;
+    invoke-virtual {p0}, Landroid/preference/PreferenceActivity$HeaderAdapter;->getContext()Landroid/content/Context;
+
+    move-result-object v4
 
-    const v5, 0x1090083
+    iget-object v5, p0, Landroid/preference/PreferenceActivity$HeaderAdapter;->mInflater:Landroid/view/LayoutInflater;
 
-    invoke-virtual {v4, v5, p3, v6}, Landroid/view/LayoutInflater;->inflate(ILandroid/view/ViewGroup;Z)Landroid/view/View;
+    invoke-static {v4, p3, v5}, Landroid/preference/PreferenceActivity$Injector;->getItemView(Landroid/content/Context;Landroid/view/ViewGroup;Landroid/view/LayoutInflater;)Landroid/view/View;
 
     move-result-object v3
 
@@ -143,6 +145,12 @@
 
     invoke-virtual {v4, v5}, Landroid/widget/ImageView;->setImageResource(I)V
 
+    iget-object v4, v1, Landroid/preference/PreferenceActivity$HeaderAdapter$HeaderViewHolder;->icon:Landroid/widget/ImageView;
+
+    iget v5, v0, Landroid/preference/PreferenceActivity$Header;->iconRes:I
+
+    invoke-static {v4, v5}, Landroid/preference/PreferenceActivity$Injector;->setIconVisible(Landroid/widget/ImageView;I)V
+
     iget-object v4, v1, Landroid/preference/PreferenceActivity$HeaderAdapter$HeaderViewHolder;->title:Landroid/widget/TextView;
 
     invoke-virtual {p0}, Landroid/preference/PreferenceActivity$HeaderAdapter;->getContext()Landroid/content/Context;
diff --git a/framework.jar.out/smali/android/preference/PreferenceActivity.smali b/framework.jar.out/smali/android/preference/PreferenceActivity.smali
index 11a79d4..adae715 100644
--- a/framework.jar.out/smali/android/preference/PreferenceActivity.smali
+++ b/framework.jar.out/smali/android/preference/PreferenceActivity.smali
@@ -2045,6 +2045,8 @@
 
     if-lez v17, :cond_e
 
+    invoke-static/range {p0 .. p0}, Landroid/preference/PreferenceActivity$Injector;->setListViewPadding(Landroid/preference/PreferenceActivity;)V
+
     new-instance v17, Landroid/preference/PreferenceActivity$HeaderAdapter;
 
     move-object/from16 v0, p0
diff --git a/framework.jar.out/smali/android/preference/PreferenceFrameLayout$LayoutParams.smali b/framework.jar.out/smali/android/preference/PreferenceFrameLayout$LayoutParams.smali
index d15b8a0..8eb9448 100644
--- a/framework.jar.out/smali/android/preference/PreferenceFrameLayout$LayoutParams.smali
+++ b/framework.jar.out/smali/android/preference/PreferenceFrameLayout$LayoutParams.smali
@@ -59,6 +59,14 @@
 
     iput-boolean v1, p0, Landroid/preference/PreferenceFrameLayout$LayoutParams;->removeBorders:Z
 
+    iget-boolean v1, p0, Landroid/preference/PreferenceFrameLayout$LayoutParams;->removeBorders:Z
+
+    invoke-static {p1, v1}, Landroid/preference/PreferenceFrameLayout$LayoutParams$Injector;->isRemoveBorders(Landroid/content/Context;Z)Z
+
+    move-result v1
+
+    iput-boolean v1, p0, Landroid/preference/PreferenceFrameLayout$LayoutParams;->removeBorders:Z
+
     invoke-virtual {v0}, Landroid/content/res/TypedArray;->recycle()V
 
     return-void
diff --git a/framework.jar.out/smali/android/preference/PreferenceGroup.smali b/framework.jar.out/smali/android/preference/PreferenceGroup.smali
index 3504c01..a043082 100644
--- a/framework.jar.out/smali/android/preference/PreferenceGroup.smali
+++ b/framework.jar.out/smali/android/preference/PreferenceGroup.smali
@@ -257,6 +257,8 @@
     :cond_5
     invoke-virtual {p0}, Landroid/preference/PreferenceGroup;->notifyHierarchyChanged()V
 
+    invoke-virtual {p1, p0}, Landroid/preference/Preference;->setParent(Landroid/preference/PreferenceGroup;)V
+
     move v1, v2
 
     goto :goto_0
diff --git a/framework.jar.out/smali/android/preference/PreferenceScreen.smali b/framework.jar.out/smali/android/preference/PreferenceScreen.smali
index 6667aab..faeea0a 100644
--- a/framework.jar.out/smali/android/preference/PreferenceScreen.smali
+++ b/framework.jar.out/smali/android/preference/PreferenceScreen.smali
@@ -160,8 +160,16 @@
 
     move-result-object v0
 
+    invoke-static {p1, v0}, Landroid/preference/PreferenceScreen$Injector;->addHeaderView(Landroid/widget/ListView;Landroid/widget/ListAdapter;)V
+
+    invoke-virtual {p0}, Landroid/preference/PreferenceScreen;->getRootAdapter()Landroid/widget/ListAdapter;
+
+    move-result-object v0
+
     invoke-virtual {p1, v0}, Landroid/widget/ListView;->setAdapter(Landroid/widget/ListAdapter;)V
 
+    invoke-static {p1}, Landroid/preference/PreferenceScreen$Injector;->bind(Landroid/widget/ListView;)V
+
     invoke-virtual {p0}, Landroid/preference/PreferenceScreen;->onAttachedToActivity()V
 
     return-void
diff --git a/framework.jar.out/smali/android/preference/RingtonePreference.smali b/framework.jar.out/smali/android/preference/RingtonePreference.smali
index 2c06be1..186c3c9 100644
--- a/framework.jar.out/smali/android/preference/RingtonePreference.smali
+++ b/framework.jar.out/smali/android/preference/RingtonePreference.smali
@@ -316,7 +316,7 @@
 
     const-string v0, "com.android.thememanager"
 
-    const-string v1, "com.android.thememanager.ThemeResourceTabActivity"
+    const-string v1, "com.android.thememanager.activity.ThemeTabActivity"
 
     invoke-virtual {p1, v0, v1}, Landroid/content/Intent;->setClassName(Ljava/lang/String;Ljava/lang/String;)Landroid/content/Intent;
 
diff --git a/framework.jar.out/smali/android/speech/tts/TextToSpeech$Connection.smali b/framework.jar.out/smali/android/speech/tts/TextToSpeech$Connection.smali
index 58e3bf8..1ce4f9a 100644
--- a/framework.jar.out/smali/android/speech/tts/TextToSpeech$Connection.smali
+++ b/framework.jar.out/smali/android/speech/tts/TextToSpeech$Connection.smali
@@ -82,6 +82,36 @@
     return-object v0
 .end method
 
+.method public isConnected()Z
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Landroid/speech/tts/TextToSpeech$Connection;->mService:Landroid/speech/tts/ITextToSpeechService;
+
+    if-eqz v0, :cond_0
+
+    iget-object v0, p0, Landroid/speech/tts/TextToSpeech$Connection;->mService:Landroid/speech/tts/ITextToSpeechService;
+
+    invoke-interface {v0}, Landroid/speech/tts/ITextToSpeechService;->asBinder()Landroid/os/IBinder;
+
+    move-result-object v0
+
+    invoke-interface {v0}, Landroid/os/IBinder;->isBinderAlive()Z
+
+    move-result v0
+
+    :goto_0
+    return v0
+
+    :cond_0
+    const/4 v0, 0x0
+
+    goto :goto_0
+.end method
+
 .method public onServiceConnected(Landroid/content/ComponentName;Landroid/os/IBinder;)V
     .locals 5
     .parameter "name"
diff --git a/framework.jar.out/smali/android/speech/tts/TextToSpeech.smali b/framework.jar.out/smali/android/speech/tts/TextToSpeech.smali
index 55b5ecf..9817044 100644
--- a/framework.jar.out/smali/android/speech/tts/TextToSpeech.smali
+++ b/framework.jar.out/smali/android/speech/tts/TextToSpeech.smali
@@ -1816,3 +1816,30 @@
 
     return v0
 .end method
+
+.method public tryReconnectIfDead()V
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Landroid/speech/tts/TextToSpeech;->mServiceConnection:Landroid/speech/tts/TextToSpeech$Connection;
+
+    if-eqz v0, :cond_0
+
+    iget-object v0, p0, Landroid/speech/tts/TextToSpeech;->mServiceConnection:Landroid/speech/tts/TextToSpeech$Connection;
+
+    invoke-virtual {v0}, Landroid/speech/tts/TextToSpeech$Connection;->isConnected()Z
+
+    move-result v0
+
+    if-nez v0, :cond_0
+
+    invoke-virtual {p0}, Landroid/speech/tts/TextToSpeech;->shutdown()V
+
+    invoke-direct {p0}, Landroid/speech/tts/TextToSpeech;->initTts()I
+
+    :cond_0
+    return-void
+.end method
diff --git a/framework.jar.out/smali/android/telephony/PhoneNumberUtils.smali b/framework.jar.out/smali/android/telephony/PhoneNumberUtils.smali
index 8c459ea..17490db 100644
--- a/framework.jar.out/smali/android/telephony/PhoneNumberUtils.smali
+++ b/framework.jar.out/smali/android/telephony/PhoneNumberUtils.smali
@@ -2143,7 +2143,7 @@
     :cond_14
     move-object/from16 v0, p1
 
-    invoke-static {v0, v10, v4}, Landroid/telephony/PhoneNumberUtils;->checkPrefixIsIgnorable(Ljava/lang/String;II)Z
+    invoke-static {v0, v11, v4}, Landroid/telephony/PhoneNumberUtils;->checkPrefixIsIgnorable(Ljava/lang/String;II)Z
 
     move-result v18
 
diff --git a/framework.jar.out/smali/android/util/TypedValue.smali b/framework.jar.out/smali/android/util/TypedValue.smali
index 2b78a3e..a8c54b5 100644
--- a/framework.jar.out/smali/android/util/TypedValue.smali
+++ b/framework.jar.out/smali/android/util/TypedValue.smali
@@ -88,6 +88,12 @@
 
 .field public static final TYPE_STRING:I = 0x3
 
+.field public static miui_font_scale:F
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_FIELD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+.end field
+
 
 # instance fields
 .field public assetCookie:I
@@ -118,6 +124,10 @@
 
     const/4 v3, 0x0
 
+    const/high16 v0, 0x3f80
+
+    sput v0, Landroid/util/TypedValue;->miui_font_scale:F
+
     new-array v0, v6, [F
 
     fill-array-data v0, :array_0
@@ -221,9 +231,9 @@
     goto :goto_0
 
     :pswitch_2
-    iget v0, p2, Landroid/util/DisplayMetrics;->scaledDensity:F
+    invoke-static {p1, p2}, Landroid/util/TypedValue;->miuiScale(FLandroid/util/DisplayMetrics;)F
 
-    mul-float/2addr p1, v0
+    move-result p1
 
     goto :goto_0
 
@@ -779,6 +789,40 @@
     .end packed-switch
 .end method
 
+.method private static miuiScale(FLandroid/util/DisplayMetrics;)F
+    .locals 2
+    .parameter "value"
+    .parameter "metrics"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    const/high16 v0, 0x41a0
+
+    cmpl-float v0, p0, v0
+
+    if-ltz v0, :cond_0
+
+    iget v0, p1, Landroid/util/DisplayMetrics;->density:F
+
+    mul-float/2addr v0, p0
+
+    :goto_0
+    return v0
+
+    :cond_0
+    iget v0, p1, Landroid/util/DisplayMetrics;->scaledDensity:F
+
+    mul-float/2addr v0, p0
+
+    sget v1, Landroid/util/TypedValue;->miui_font_scale:F
+
+    mul-float/2addr v0, v1
+
+    goto :goto_0
+.end method
+
 
 # virtual methods
 .method public final coerceToString()Ljava/lang/CharSequence;
diff --git a/framework.jar.out/smali/android/view/LayoutInflater.smali b/framework.jar.out/smali/android/view/LayoutInflater.smali
index 278b105..3b91578 100644
--- a/framework.jar.out/smali/android/view/LayoutInflater.smali
+++ b/framework.jar.out/smali/android/view/LayoutInflater.smali
@@ -1503,6 +1503,14 @@
 
     move-result-object v1
 
+    invoke-static {v1, p1}, Landroid/view/LayoutInflater$Injector;->getResourceId(Landroid/content/Context;I)I
+
+    move-result p1
+
+    invoke-virtual {p0}, Landroid/view/LayoutInflater;->getContext()Landroid/content/Context;
+
+    move-result-object v1
+
     invoke-virtual {v1}, Landroid/content/Context;->getResources()Landroid/content/res/Resources;
 
     move-result-object v1
diff --git a/framework.jar.out/smali/android/view/View.smali b/framework.jar.out/smali/android/view/View.smali
index 5e1b1e7..b733210 100644
--- a/framework.jar.out/smali/android/view/View.smali
+++ b/framework.jar.out/smali/android/view/View.smali
@@ -686,6 +686,12 @@
 
 .field mAccessibilityViewId:I
 
+.field mAdditionalState:I
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_FIELD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+.end field
+
 .field private mAnimator:Landroid/view/ViewPropertyAnimator;
 
 .field mAttachInfo:Landroid/view/View$AttachInfo;
@@ -1739,6 +1745,8 @@
     :goto_0
     iput-object v0, p0, Landroid/view/View;->mInputEventConsistencyVerifier:Landroid/view/InputEventConsistencyVerifier;
 
+    iput v2, p0, Landroid/view/View;->mAdditionalState:I
+
     iput-object v1, p0, Landroid/view/View;->mResources:Landroid/content/res/Resources;
 
     return-void
@@ -1815,6 +1823,8 @@
     :goto_0
     iput-object v0, p0, Landroid/view/View;->mInputEventConsistencyVerifier:Landroid/view/InputEventConsistencyVerifier;
 
+    iput v3, p0, Landroid/view/View;->mAdditionalState:I
+
     iput-object p1, p0, Landroid/view/View;->mContext:Landroid/content/Context;
 
     if-eqz p1, :cond_0
@@ -3297,6 +3307,14 @@
     :cond_b
     invoke-virtual/range {p0 .. p0}, Landroid/view/View;->computeOpaqueFlags()V
 
+    move-object/from16 v0, p0
+
+    move-object/from16 v1, p2
+
+    move/from16 v2, p3
+
+    invoke-static {v0, v1, v2}, Landroid/view/View$Injector;->initializeChildrenSequenceStates(Landroid/view/View;Landroid/util/AttributeSet;I)V
+
     return-void
 
     .restart local v9       #bottomPadding:I
@@ -13236,6 +13254,8 @@
 
     invoke-virtual {v0, v1}, Landroid/graphics/drawable/Drawable;->setState([I)Z
 
+    invoke-static {p0, v0}, Landroid/view/View$Injector;->onDrawableStateChanged(Landroid/view/View;Landroid/graphics/drawable/Drawable;)V
+
     :cond_0
     return-void
 .end method
@@ -13275,6 +13295,31 @@
     return-void
 .end method
 
+.method fillAdditionalState([I)[I
+    .locals 2
+    .parameter "states"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    move-object v0, p1
+
+    .local v0, newStates:[I
+    iget v1, p0, Landroid/view/View;->mAdditionalState:I
+
+    if-eqz v1, :cond_0
+
+    iget v1, p0, Landroid/view/View;->mAdditionalState:I
+
+    invoke-static {v0, v1}, Lmiui/util/UiUtils;->getViewStates([II)[I
+
+    move-result-object v0
+
+    :cond_0
+    return-object v0
+.end method
+
 .method public findFocus()Landroid/view/View;
     .locals 1
 
@@ -20627,6 +20672,10 @@
     aget-object v0, v5, v4
 
     .local v0, drawableState:[I
+    invoke-virtual {p0, v0}, Landroid/view/View;->fillAdditionalState([I)[I
+
+    move-result-object v0
+
     if-eqz p1, :cond_0
 
     if-eqz v0, :cond_c
@@ -25531,6 +25580,30 @@
     goto :goto_1
 .end method
 
+.method public setAdditionalState(I)V
+    .locals 1
+    .parameter "state"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Landroid/view/View;->mAdditionalState:I
+
+    if-eq p1, v0, :cond_0
+
+    iput p1, p0, Landroid/view/View;->mAdditionalState:I
+
+    const/4 v0, 0x1
+
+    invoke-virtual {p0, v0}, Landroid/view/View;->invalidate(Z)V
+
+    invoke-virtual {p0}, Landroid/view/View;->refreshDrawableState()V
+
+    :cond_0
+    return-void
+.end method
+
 .method public setAlpha(F)V
     .locals 3
     .parameter "alpha"
diff --git a/framework.jar.out/smali/android/view/ViewConfiguration.smali b/framework.jar.out/smali/android/view/ViewConfiguration.smali
index ff46e95..553d174 100644
--- a/framework.jar.out/smali/android/view/ViewConfiguration.smali
+++ b/framework.jar.out/smali/android/view/ViewConfiguration.smali
@@ -334,6 +334,10 @@
 
     float-to-int v10, v10
 
+    invoke-static {p1, v10}, Landroid/view/ViewConfiguration$Injector;->getOverScrollDistance(Landroid/content/Context;I)I
+
+    move-result v10
+
     iput v10, p0, Landroid/view/ViewConfiguration;->mOverscrollDistance:I
 
     const/high16 v10, 0x40c0
@@ -344,6 +348,10 @@
 
     float-to-int v10, v10
 
+    invoke-static {p1, v10}, Landroid/view/ViewConfiguration$Injector;->getOverFlingDistance(Landroid/content/Context;I)I
+
+    move-result v10
+
     iput v10, p0, Landroid/view/ViewConfiguration;->mOverflingDistance:I
 
     iget-boolean v10, p0, Landroid/view/ViewConfiguration;->sHasPermanentMenuKeySet:Z
@@ -437,6 +445,16 @@
     .parameter "context"
 
     .prologue
+    invoke-static {p0}, Landroid/view/ViewConfiguration$Injector;->get(Landroid/content/Context;)Landroid/view/ViewConfiguration;
+
+    move-result-object v0
+
+    if-eqz v0, :cond_miui_0
+
+
+    return-object v0
+
+    :cond_miui_0
     invoke-virtual {p0}, Landroid/content/Context;->getResources()Landroid/content/res/Resources;
 
     move-result-object v3
@@ -858,3 +876,15 @@
 
     return v0
 .end method
+
+.method public static getInstance(Landroid/content/Context;)Landroid/view/ViewConfiguration;
+    .locals 1
+    .parameter "context"
+
+    .prologue
+    new-instance v0, Landroid/view/ViewConfiguration;
+
+    invoke-direct {v0, p0}, Landroid/view/ViewConfiguration;-><init>(Landroid/content/Context;)V
+
+    return-object v0
+.end method
diff --git a/framework.jar.out/smali/android/view/ViewGroup.smali b/framework.jar.out/smali/android/view/ViewGroup.smali
index 5838f25..098e16a 100644
--- a/framework.jar.out/smali/android/view/ViewGroup.smali
+++ b/framework.jar.out/smali/android/view/ViewGroup.smali
@@ -116,6 +116,12 @@
     .end annotation
 .end field
 
+.field mChildSequenceStateTaggingListener:Landroid/view/ViewGroup$ChildSequenceStateTaggingListener;
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_FIELD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+.end field
+
 .field final mChildTransformation:Landroid/view/animation/Transformation;
 
 .field private mChildren:[Landroid/view/View;
@@ -206,6 +212,12 @@
 
 .field protected mPersistentDrawingCache:I
 
+.field mTagChildrenSequenceState:Z
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_FIELD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+.end field
+
 .field private mTransition:Landroid/animation/LayoutTransition;
 
 .field private mTransitioningViews:Ljava/util/ArrayList;
@@ -545,6 +557,8 @@
 
     :cond_1
     :goto_0
+    invoke-static {p0}, Landroid/view/ViewGroup$Injector;->tagChildSequenceState(Landroid/view/ViewGroup;)V
+
     return-void
 
     :cond_2
@@ -1998,6 +2012,12 @@
     .end local v2           #animateLayoutChanges:Z
     .end local v3           #attr:I
     :cond_1
+    invoke-static {p1, p2}, Landroid/view/ViewGroup$Injector;->initTagChildSequenceState(Landroid/content/Context;Landroid/util/AttributeSet;)Z
+
+    move-result v6
+
+    iput-boolean v6, p0, Landroid/view/ViewGroup;->mTagChildrenSequenceState:Z
+
     invoke-virtual {v1}, Landroid/content/res/TypedArray;->recycle()V
 
     return-void
@@ -2345,6 +2365,8 @@
 
     :cond_2
     :goto_1
+    invoke-static {p0}, Landroid/view/ViewGroup$Injector;->tagChildSequenceState(Landroid/view/ViewGroup;)V
+
     return-void
 
     :cond_3
@@ -2485,6 +2507,8 @@
 
     iput v4, p0, Landroid/view/ViewGroup;->mChildrenCount:I
 
+    invoke-static {p0}, Landroid/view/ViewGroup$Injector;->tagChildSequenceState(Landroid/view/ViewGroup;)V
+
     goto :goto_0
 .end method
 
@@ -10820,6 +10844,8 @@
     invoke-virtual {p0, p1}, Landroid/view/ViewGroup;->notifyChildOfDrag(Landroid/view/View;)Z
 
     :cond_1
+    invoke-static {p0}, Landroid/view/ViewGroup$Injector;->tagChildSequenceState(Landroid/view/ViewGroup;)V
+
     return-void
 
     :cond_2
@@ -12201,6 +12227,19 @@
     return-void
 .end method
 
+.method public setChildSequenceStateTaggingListener(Landroid/view/ViewGroup$ChildSequenceStateTaggingListener;)V
+    .locals 0
+    .parameter "listener"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iput-object p1, p0, Landroid/view/ViewGroup;->mChildSequenceStateTaggingListener:Landroid/view/ViewGroup$ChildSequenceStateTaggingListener;
+
+    return-void
+.end method
+
 .method protected setChildrenDrawingCacheEnabled(Z)V
     .locals 5
     .parameter "enabled"
diff --git a/framework.jar.out/smali/android/widget/AbsListView$FlingRunnable.smali b/framework.jar.out/smali/android/widget/AbsListView$FlingRunnable.smali
index db38a0a..3252069 100644
--- a/framework.jar.out/smali/android/widget/AbsListView$FlingRunnable.smali
+++ b/framework.jar.out/smali/android/widget/AbsListView$FlingRunnable.smali
@@ -70,6 +70,33 @@
     return-object v0
 .end method
 
+.method private endFling2()V
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Landroid/widget/AbsListView$FlingRunnable;->this$0:Landroid/widget/AbsListView;
+
+    #getter for: Landroid/widget/AbsListView;->mScrollY:I
+    invoke-static {v0}, Landroid/widget/AbsListView;->access$2100(Landroid/widget/AbsListView;)I
+
+    move-result v0
+
+    if-eqz v0, :cond_0
+
+    invoke-virtual {p0}, Landroid/widget/AbsListView$FlingRunnable;->startSpringback()V
+
+    :goto_0
+    return-void
+
+    :cond_0
+    invoke-virtual {p0}, Landroid/widget/AbsListView$FlingRunnable;->endFling()V
+
+    goto :goto_0
+.end method
+
 
 # virtual methods
 .method edgeReached(I)V
diff --git a/framework.jar.out/smali/android/widget/AbsListView.smali b/framework.jar.out/smali/android/widget/AbsListView.smali
index 0b7fa6e..475b486 100644
--- a/framework.jar.out/smali/android/widget/AbsListView.smali
+++ b/framework.jar.out/smali/android/widget/AbsListView.smali
@@ -124,6 +124,12 @@
 
 .field mAdapterHasStableIds:Z
 
+.field mBottomLineDrawable:Landroid/graphics/drawable/Drawable;
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_FIELD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+.end field
+
 .field private mCacheColorHint:I
 
 .field mCachingActive:Z
@@ -1177,6 +1183,27 @@
     return-object v0
 .end method
 
+.method private calcFirstPosition(ZI)V
+    .locals 1
+    .parameter "down"
+    .parameter "count"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    if-eqz p1, :cond_0
+
+    iget v0, p0, Landroid/widget/AbsListView;->mFirstPosition:I
+
+    add-int/2addr v0, p2
+
+    iput v0, p0, Landroid/widget/AbsListView;->mFirstPosition:I
+
+    :cond_0
+    return-void
+.end method
+
 .method private clearScrollingCache()V
     .locals 1
 
@@ -1790,6 +1817,8 @@
 
     iput v1, p0, Landroid/widget/AbsListView;->mDensityScale:F
 
+    invoke-static {p0}, Landroid/widget/AbsListView$Injector;->setChildSequenceStateTaggingListener(Landroid/widget/AbsListView;)V
+
     return-void
 .end method
 
@@ -4329,6 +4358,8 @@
     .end local v6           #scrollY:I
     :cond_4
     :goto_0
+    invoke-static {p0, p1}, Landroid/widget/AbsListView$Injector;->drawBorder(Landroid/widget/AbsListView;Landroid/graphics/Canvas;)V
+
     return-void
 
     .restart local v6       #scrollY:I
@@ -8285,13 +8316,17 @@
 
     move-result v26
 
-    if-eqz v26, :cond_ff
+    if-eqz v26, :cond_miui_0
 
-    const/16 v26, 0x1
+    const/16 v26, 0x3
 
-    return v26
+    move-object/from16 v0, p1
+
+    move/from16 v1, v26
 
-    :cond_ff
+    invoke-virtual {v0, v1}, Landroid/view/MotionEvent;->setAction(I)V
+
+    :cond_miui_0
     invoke-virtual/range {p0 .. p0}, Landroid/widget/AbsListView;->isEnabled()Z
 
     move-result v26
@@ -14251,6 +14286,10 @@
 
     iput-boolean v0, v1, Landroid/widget/AbsListView;->mBlockLayoutRequests:Z
 
+    move-object/from16 v0, p0
+
+    invoke-direct {v0, v11, v10}, Landroid/widget/AbsListView;->calcFirstPosition(ZI)V
+
     if-lez v10, :cond_e
 
     move-object/from16 v0, p0
@@ -14283,7 +14322,9 @@
 
     invoke-virtual {v0, v1}, Landroid/widget/AbsListView;->offsetChildrenTopAndBottom(I)V
 
-    if-eqz v11, :cond_10
+    sget-boolean v29, Landroid/widget/AbsListView$Injector;->FALSE:Z
+
+    if-eqz v29, :cond_10
 
     move-object/from16 v0, p0
 
diff --git a/framework.jar.out/smali/android/widget/CompoundButton.smali b/framework.jar.out/smali/android/widget/CompoundButton.smali
index 73176c9..9bae9ed 100644
--- a/framework.jar.out/smali/android/widget/CompoundButton.smali
+++ b/framework.jar.out/smali/android/widget/CompoundButton.smali
@@ -209,6 +209,15 @@
     .parameter "canvas"
 
     .prologue
+    invoke-virtual {p0, p1}, Landroid/widget/CompoundButton;->onDrawMiui(Landroid/graphics/Canvas;)Z
+
+    move-result v4
+
+    if-eqz v4, :cond_miui_0
+
+    return-void
+
+    :cond_miui_0
     invoke-super {p0, p1}, Landroid/widget/Button;->onDraw(Landroid/graphics/Canvas;)V
 
     iget-object v0, p0, Landroid/widget/CompoundButton;->mButtonDrawable:Landroid/graphics/drawable/Drawable;
@@ -282,6 +291,144 @@
     .end sparse-switch
 .end method
 
+.method onDrawMiui(Landroid/graphics/Canvas;)Z
+    .locals 6
+    .parameter "canvas"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Landroid/widget/CompoundButton;->mButtonDrawable:Landroid/graphics/drawable/Drawable;
+
+    .local v0, buttonDrawable:Landroid/graphics/drawable/Drawable;
+    if-eqz v0, :cond_0
+
+    invoke-virtual {p0}, Landroid/widget/CompoundButton;->getContext()Landroid/content/Context;
+
+    move-result-object v4
+
+    invoke-static {v4}, Lmiui/util/UiUtils;->isV5Ui(Landroid/content/Context;)Z
+
+    move-result v4
+
+    if-nez v4, :cond_1
+
+    :cond_0
+    const/4 v4, 0x0
+
+    :goto_0
+    return v4
+
+    :cond_1
+    invoke-virtual {p0}, Landroid/widget/CompoundButton;->getPaddingLeft()I
+
+    move-result v2
+
+    .local v2, x:I
+    invoke-virtual {p0}, Landroid/widget/CompoundButton;->getPaddingTop()I
+
+    move-result v3
+
+    .local v3, y:I
+    invoke-virtual {v0}, Landroid/graphics/drawable/Drawable;->getIntrinsicHeight()I
+
+    move-result v1
+
+    .local v1, height:I
+    invoke-virtual {v0}, Landroid/graphics/drawable/Drawable;->getCurrent()Landroid/graphics/drawable/Drawable;
+
+    move-result-object v4
+
+    instance-of v4, v4, Landroid/graphics/drawable/NinePatchDrawable;
+
+    if-eqz v4, :cond_2
+
+    invoke-virtual {p0}, Landroid/widget/CompoundButton;->getHeight()I
+
+    move-result v4
+
+    sub-int/2addr v4, v3
+
+    invoke-virtual {p0}, Landroid/widget/CompoundButton;->getPaddingBottom()I
+
+    move-result v5
+
+    sub-int v1, v4, v5
+
+    :goto_1
+    invoke-virtual {v0}, Landroid/graphics/drawable/Drawable;->getIntrinsicWidth()I
+
+    move-result v4
+
+    add-int/2addr v4, v2
+
+    add-int v5, v3, v1
+
+    invoke-virtual {v0, v2, v3, v4, v5}, Landroid/graphics/drawable/Drawable;->setBounds(IIII)V
+
+    invoke-virtual {v0, p1}, Landroid/graphics/drawable/Drawable;->draw(Landroid/graphics/Canvas;)V
+
+    invoke-virtual {p1}, Landroid/graphics/Canvas;->save()I
+
+    invoke-virtual {v0}, Landroid/graphics/drawable/Drawable;->getIntrinsicWidth()I
+
+    move-result v4
+
+    int-to-float v4, v4
+
+    const/4 v5, 0x0
+
+    invoke-virtual {p1, v4, v5}, Landroid/graphics/Canvas;->translate(FF)V
+
+    invoke-super {p0, p1}, Landroid/widget/Button;->onDraw(Landroid/graphics/Canvas;)V
+
+    invoke-virtual {p1}, Landroid/graphics/Canvas;->restore()V
+
+    const/4 v4, 0x1
+
+    goto :goto_0
+
+    :cond_2
+    invoke-virtual {p0}, Landroid/widget/CompoundButton;->getGravity()I
+
+    move-result v4
+
+    and-int/lit8 v4, v4, 0x70
+
+    sparse-switch v4, :sswitch_data_0
+
+    goto :goto_1
+
+    :sswitch_0
+    invoke-virtual {p0}, Landroid/widget/CompoundButton;->getHeight()I
+
+    move-result v4
+
+    sub-int/2addr v4, v1
+
+    div-int/lit8 v3, v4, 0x2
+
+    goto :goto_1
+
+    :sswitch_1
+    invoke-virtual {p0}, Landroid/widget/CompoundButton;->getHeight()I
+
+    move-result v4
+
+    sub-int v3, v4, v1
+
+    goto :goto_1
+
+    nop
+
+    :sswitch_data_0
+    .sparse-switch
+        0x10 -> :sswitch_0
+        0x50 -> :sswitch_1
+    .end sparse-switch
+.end method
+
 .method public onInitializeAccessibilityEvent(Landroid/view/accessibility/AccessibilityEvent;)V
     .locals 1
     .parameter "event"
@@ -330,6 +477,70 @@
     return-void
 .end method
 
+.method protected onMeasure(II)V
+    .locals 5
+    .parameter "widthMeasureSpec"
+    .parameter "heightMeasureSpec"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    invoke-super {p0, p1, p2}, Landroid/widget/Button;->onMeasure(II)V
+
+    iget-object v0, p0, Landroid/widget/CompoundButton;->mButtonDrawable:Landroid/graphics/drawable/Drawable;
+
+    .local v0, buttonDrawable:Landroid/graphics/drawable/Drawable;
+    if-eqz v0, :cond_0
+
+    invoke-virtual {p0}, Landroid/widget/CompoundButton;->getContext()Landroid/content/Context;
+
+    move-result-object v4
+
+    invoke-static {v4}, Lmiui/util/UiUtils;->isV5Ui(Landroid/content/Context;)Z
+
+    move-result v4
+
+    if-nez v4, :cond_1
+
+    :cond_0
+    :goto_0
+    return-void
+
+    :cond_1
+    invoke-static {p1}, Landroid/view/View$MeasureSpec;->getMode(I)I
+
+    move-result v2
+
+    .local v2, widthMode:I
+    invoke-virtual {p0}, Landroid/widget/CompoundButton;->getMeasuredWidth()I
+
+    move-result v3
+
+    .local v3, widthSize:I
+    move v1, v3
+
+    .local v1, width:I
+    const/high16 v4, 0x4000
+
+    if-eq v2, v4, :cond_2
+
+    invoke-virtual {v0}, Landroid/graphics/drawable/Drawable;->getIntrinsicWidth()I
+
+    move-result v4
+
+    add-int v1, v3, v4
+
+    :cond_2
+    invoke-virtual {p0}, Landroid/widget/CompoundButton;->getMeasuredHeight()I
+
+    move-result v4
+
+    invoke-virtual {p0, v1, v4}, Landroid/widget/CompoundButton;->setMeasuredDimension(II)V
+
+    goto :goto_0
+.end method
+
 .method public onRestoreInstanceState(Landroid/os/Parcelable;)V
     .locals 2
     .parameter "state"
diff --git a/framework.jar.out/smali/android/widget/DatePicker.smali b/framework.jar.out/smali/android/widget/DatePicker.smali
index 2316fa5..001e423 100644
--- a/framework.jar.out/smali/android/widget/DatePicker.smali
+++ b/framework.jar.out/smali/android/widget/DatePicker.smali
@@ -44,6 +44,12 @@
 
 .field private mIsEnabled:Z
 
+.field private mLayoutResId:I
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_FIELD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+.end field
+
 .field private mMaxDate:Ljava/util/Calendar;
 
 .field private mMinDate:Ljava/util/Calendar;
@@ -136,14 +142,6 @@
 
     iput-boolean v13, v0, Landroid/widget/DatePicker;->mIsEnabled:Z
 
-    invoke-static {}, Ljava/util/Locale;->getDefault()Ljava/util/Locale;
-
-    move-result-object v13
-
-    move-object/from16 v0, p0
-
-    invoke-direct {v0, v13}, Landroid/widget/DatePicker;->setCurrentLocale(Ljava/util/Locale;)V
-
     sget-object v13, Lcom/android/internal/R$styleable;->DatePicker:[I
 
     const/4 v14, 0x0
@@ -220,6 +218,18 @@
     .local v7, layoutResourceId:I
     invoke-virtual {v3}, Landroid/content/res/TypedArray;->recycle()V
 
+    move-object/from16 v0, p0
+
+    iput v7, v0, Landroid/widget/DatePicker;->mLayoutResId:I
+
+    invoke-static {}, Ljava/util/Locale;->getDefault()Ljava/util/Locale;
+
+    move-result-object v13
+
+    move-object/from16 v0, p0
+
+    invoke-direct {v0, v13}, Landroid/widget/DatePicker;->setCurrentLocale(Ljava/util/Locale;)V
+
     const-string v13, "layout_inflater"
 
     move-object/from16 v0, p1
@@ -989,6 +999,10 @@
     throw v3
 
     :sswitch_0
+    iget-object v3, p0, Landroid/widget/DatePicker;->mDaySpinner:Landroid/widget/NumberPicker;
+
+    invoke-direct {p0, v3, v0, v2}, Landroid/widget/DatePicker;->setPosState(Landroid/widget/NumberPicker;II)V
+
     iget-object v3, p0, Landroid/widget/DatePicker;->mSpinners:Landroid/widget/LinearLayout;
 
     iget-object v4, p0, Landroid/widget/DatePicker;->mDaySpinner:Landroid/widget/NumberPicker;
@@ -1005,6 +1019,10 @@
     goto :goto_0
 
     :sswitch_1
+    iget-object v3, p0, Landroid/widget/DatePicker;->mMonthSpinner:Landroid/widget/NumberPicker;
+
+    invoke-direct {p0, v3, v0, v2}, Landroid/widget/DatePicker;->setPosState(Landroid/widget/NumberPicker;II)V
+
     iget-object v3, p0, Landroid/widget/DatePicker;->mSpinners:Landroid/widget/LinearLayout;
 
     iget-object v4, p0, Landroid/widget/DatePicker;->mMonthSpinner:Landroid/widget/NumberPicker;
@@ -1018,6 +1036,10 @@
     goto :goto_1
 
     :sswitch_2
+    iget-object v3, p0, Landroid/widget/DatePicker;->mYearSpinner:Landroid/widget/NumberPicker;
+
+    invoke-direct {p0, v3, v0, v2}, Landroid/widget/DatePicker;->setPosState(Landroid/widget/NumberPicker;II)V
+
     iget-object v3, p0, Landroid/widget/DatePicker;->mSpinners:Landroid/widget/LinearLayout;
 
     iget-object v4, p0, Landroid/widget/DatePicker;->mYearSpinner:Landroid/widget/NumberPicker;
@@ -1041,6 +1063,66 @@
     .end sparse-switch
 .end method
 
+.method private resetShortMonths()V
+    .locals 3
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v1, p0, Landroid/widget/DatePicker;->mCurrentLocale:Ljava/util/Locale;
+
+    invoke-virtual {v1}, Ljava/util/Locale;->getCountry()Ljava/lang/String;
+
+    move-result-object v1
+
+    invoke-virtual {v1}, Ljava/lang/String;->toUpperCase()Ljava/lang/String;
+
+    move-result-object v1
+
+    const-string v2, "CN"
+
+    invoke-virtual {v1, v2}, Ljava/lang/String;->equals(Ljava/lang/Object;)Z
+
+    move-result v1
+
+    if-eqz v1, :cond_0
+
+    iget v1, p0, Landroid/widget/DatePicker;->mLayoutResId:I
+
+    const v2, 0x6030024
+
+    if-ne v1, v2, :cond_0
+
+    const/4 v0, 0x0
+
+    .local v0, i:I
+    :goto_0
+    iget-object v1, p0, Landroid/widget/DatePicker;->mShortMonths:[Ljava/lang/String;
+
+    array-length v1, v1
+
+    if-ge v0, v1, :cond_0
+
+    iget-object v1, p0, Landroid/widget/DatePicker;->mShortMonths:[Ljava/lang/String;
+
+    add-int/lit8 v2, v0, 0x1
+
+    invoke-static {v2}, Ljava/lang/String;->valueOf(I)Ljava/lang/String;
+
+    move-result-object v2
+
+    aput-object v2, v1, v0
+
+    add-int/lit8 v0, v0, 0x1
+
+    goto :goto_0
+
+    .end local v0           #i:I
+    :cond_0
+    return-void
+.end method
+
 .method private setContentDescriptions()V
     .locals 4
 
@@ -1163,7 +1245,7 @@
     :goto_0
     iget v1, p0, Landroid/widget/DatePicker;->mNumberOfMonths:I
 
-    if-ge v0, v1, :cond_0
+    if-ge v0, v1, :cond_miui_0
 
     iget-object v1, p0, Landroid/widget/DatePicker;->mShortMonths:[Ljava/lang/String;
 
@@ -1180,6 +1262,11 @@
     add-int/lit8 v0, v0, 0x1
 
     goto :goto_0
+
+    :cond_miui_0
+    invoke-direct {p0}, Landroid/widget/DatePicker;->resetShortMonths()V
+
+    goto :cond_0
 .end method
 
 .method private setDate(III)V
@@ -1278,6 +1365,54 @@
     goto :goto_0
 .end method
 
+.method private setPosState(Landroid/widget/NumberPicker;II)V
+    .locals 2
+    .parameter "v"
+    .parameter "pos"
+    .parameter "count"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    instance-of v1, p1, Lmiui/widget/NumberPicker;
+
+    if-eqz v1, :cond_0
+
+    if-nez p2, :cond_1
+
+    const/4 v0, 0x0
+
+    .local v0, state:I
+    :goto_0
+    check-cast p1, Lmiui/widget/NumberPicker;
+
+    .end local p1
+    invoke-virtual {p1, v0}, Lmiui/widget/NumberPicker;->setPositionState(I)V
+
+    .end local v0           #state:I
+    :cond_0
+    return-void
+
+    .restart local p1
+    :cond_1
+    add-int/lit8 v1, p3, -0x1
+
+    if-ne p2, v1, :cond_2
+
+    const/4 v0, 0x1
+
+    .restart local v0       #state:I
+    goto :goto_0
+
+    .end local v0           #state:I
+    :cond_2
+    const/4 v0, 0x3
+
+    .restart local v0       #state:I
+    goto :goto_0
+.end method
+
 .method private trySetContentDescription(Landroid/view/View;II)V
     .locals 2
     .parameter "root"
diff --git a/framework.jar.out/smali/android/widget/EdgeEffect.smali b/framework.jar.out/smali/android/widget/EdgeEffect.smali
index d15efec..10414ea 100644
--- a/framework.jar.out/smali/android/widget/EdgeEffect.smali
+++ b/framework.jar.out/smali/android/widget/EdgeEffect.smali
@@ -136,17 +136,13 @@
     move-result-object v0
 
     .local v0, res:Landroid/content/res/Resources;
-    const v1, 0x108042a
-
-    invoke-virtual {v0, v1}, Landroid/content/res/Resources;->getDrawable(I)Landroid/graphics/drawable/Drawable;
+    invoke-static {p1}, Landroid/widget/EdgeEffect$Injector;->getOverScrollEdge(Landroid/content/Context;)Landroid/graphics/drawable/Drawable;
 
     move-result-object v1
 
     iput-object v1, p0, Landroid/widget/EdgeEffect;->mEdge:Landroid/graphics/drawable/Drawable;
 
-    const v1, 0x108042b
-
-    invoke-virtual {v0, v1}, Landroid/content/res/Resources;->getDrawable(I)Landroid/graphics/drawable/Drawable;
+    invoke-static {p1}, Landroid/widget/EdgeEffect$Injector;->getOverScrollGlow(Landroid/content/Context;)Landroid/graphics/drawable/Drawable;
 
     move-result-object v1
 
diff --git a/framework.jar.out/smali/android/widget/NumberPicker.smali b/framework.jar.out/smali/android/widget/NumberPicker.smali
index 14669bb..cbc8bb3 100644
--- a/framework.jar.out/smali/android/widget/NumberPicker.smali
+++ b/framework.jar.out/smali/android/widget/NumberPicker.smali
@@ -31,9 +31,9 @@
 
 .field private static final SELECTOR_MAX_FLING_VELOCITY_ADJUSTMENT:I = 0x8
 
-.field private static final SELECTOR_MIDDLE_ITEM_INDEX:I = 0x1
+.field private SELECTOR_MIDDLE_ITEM_INDEX:I
 
-.field private static final SELECTOR_WHEEL_ITEM_COUNT:I = 0x3
+.field private SELECTOR_WHEEL_ITEM_COUNT:I
 
 .field private static final SIZE_UNSPECIFIED:I = -0x1
 
@@ -85,6 +85,12 @@
 
 .field private final mInputText:Landroid/widget/EditText;
 
+.field private mIsV5:Z
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_FIELD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+.end field
+
 .field private mLastDownEventTime:J
 
 .field private mLastDownEventY:F
@@ -95,7 +101,7 @@
 
 .field private mLongPressUpdateInterval:J
 
-.field private final mMaxHeight:I
+.field private mMaxHeight:I
 
 .field private mMaxValue:I
 
@@ -111,6 +117,12 @@
 
 .field private mMinimumFlingVelocity:I
 
+.field private mNeedSoftInput:Z
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_FIELD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+.end field
+
 .field private mOnScrollListener:Landroid/widget/NumberPicker$OnScrollListener;
 
 .field private mOnValueChangeListener:Landroid/widget/NumberPicker$OnValueChangeListener;
@@ -125,7 +137,7 @@
 
 .field private final mSelectionDividerHeight:I
 
-.field private final mSelectionDividersDistance:I
+.field private mSelectionDividersDistance:I
 
 .field private mSelectorElementHeight:I
 
@@ -140,7 +152,7 @@
     .end annotation
 .end field
 
-.field private final mSelectorIndices:[I
+.field private mSelectorIndices:[I
 
 .field private mSelectorTextGapHeight:I
 
@@ -239,6 +251,28 @@
     .prologue
     invoke-direct/range {p0 .. p3}, Landroid/widget/LinearLayout;-><init>(Landroid/content/Context;Landroid/util/AttributeSet;I)V
 
+    const/4 v14, 0x3
+
+    move-object/from16 v0, p0
+
+    iput v14, v0, Landroid/widget/NumberPicker;->SELECTOR_WHEEL_ITEM_COUNT:I
+
+    move-object/from16 v0, p0
+
+    iget v14, v0, Landroid/widget/NumberPicker;->SELECTOR_WHEEL_ITEM_COUNT:I
+
+    div-int/lit8 v14, v14, 0x2
+
+    move-object/from16 v0, p0
+
+    iput v14, v0, Landroid/widget/NumberPicker;->SELECTOR_MIDDLE_ITEM_INDEX:I
+
+    const/4 v14, 0x1
+
+    move-object/from16 v0, p0
+
+    iput-boolean v14, v0, Landroid/widget/NumberPicker;->mNeedSoftInput:Z
+
     const-wide/16 v14, 0x12c
 
     move-object/from16 v0, p0
@@ -253,7 +287,9 @@
 
     iput-object v14, v0, Landroid/widget/NumberPicker;->mSelectorIndexToStringCache:Landroid/util/SparseArray;
 
-    const/4 v14, 0x3
+    move-object/from16 v0, p0
+
+    iget v14, v0, Landroid/widget/NumberPicker;->SELECTOR_WHEEL_ITEM_COUNT:I
 
     new-array v14, v14, [I
 
@@ -273,6 +309,12 @@
 
     iput v14, v0, Landroid/widget/NumberPicker;->mScrollState:I
 
+    const/4 v14, 0x0
+
+    move-object/from16 v0, p0
+
+    iput-boolean v14, v0, Landroid/widget/NumberPicker;->mIsV5:Z
+
     sget-object v14, Lcom/android/internal/R$styleable;->NumberPicker:[I
 
     const/4 v15, 0x0
@@ -2297,7 +2339,9 @@
     .local v0, editTextTextPosition:I
     iget v5, p0, Landroid/widget/NumberPicker;->mSelectorElementHeight:I
 
-    mul-int/lit8 v5, v5, 0x1
+    iget v6, p0, Landroid/widget/NumberPicker;->SELECTOR_MIDDLE_ITEM_INDEX:I
+
+    mul-int/2addr v5, v6
 
     sub-int v5, v0, v5
 
@@ -2338,7 +2382,9 @@
 
     if-ge v1, v4, :cond_1
 
-    add-int/lit8 v4, v1, -0x1
+    iget v4, p0, Landroid/widget/NumberPicker;->SELECTOR_MIDDLE_ITEM_INDEX:I
+
+    sub-int v4, v1, v4
 
     add-int v2, v0, v4
 
@@ -2883,6 +2929,13 @@
     .prologue
     const/4 v2, 0x0
 
+    iget-boolean v1, p0, Landroid/widget/NumberPicker;->mNeedSoftInput:Z
+
+    if-nez v1, :cond_miui_0
+
+    return-void
+
+    :cond_miui_0
     invoke-static {}, Landroid/view/inputmethod/InputMethodManager;->peekInstance()Landroid/view/inputmethod/InputMethodManager;
 
     move-result-object v0
@@ -3225,6 +3278,18 @@
     goto :goto_0
 .end method
 
+.method protected adjustScrollWheel()V
+    .locals 0
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    invoke-direct {p0}, Landroid/widget/NumberPicker;->ensureScrollWheelAdjusted()Z
+
+    return-void
+.end method
+
 .method public computeScroll()V
     .locals 4
 
@@ -3579,6 +3644,42 @@
     return v0
 .end method
 
+.method protected getBottomSelectionDividerBottom()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Landroid/widget/NumberPicker;->mBottomSelectionDividerBottom:I
+
+    return v0
+.end method
+
+.method protected getCurrentScrollOffset()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Landroid/widget/NumberPicker;->mCurrentScrollOffset:I
+
+    return v0
+.end method
+
+.method protected getDecrementVirtualBUttonPressed()Z
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-boolean v0, p0, Landroid/widget/NumberPicker;->mDecrementVirtualButtonPressed:Z
+
+    return v0
+.end method
+
 .method public getDisplayedValues()[Ljava/lang/String;
     .locals 1
 
@@ -3588,6 +3689,42 @@
     return-object v0
 .end method
 
+.method protected getEditText()Landroid/widget/EditText;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Landroid/widget/NumberPicker;->mInputText:Landroid/widget/EditText;
+
+    return-object v0
+.end method
+
+.method protected getIncrementVirtualButtonPressed()Z
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-boolean v0, p0, Landroid/widget/NumberPicker;->mIncrementVirtualButtonPressed:Z
+
+    return v0
+.end method
+
+.method protected getInitialScrollOffset()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Landroid/widget/NumberPicker;->mInitialScrollOffset:I
+
+    return v0
+.end method
+
 .method public getMaxValue()I
     .locals 1
 
@@ -3606,6 +3743,88 @@
     return v0
 .end method
 
+.method protected getMinWidth()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Landroid/widget/NumberPicker;->mMinWidth:I
+
+    return v0
+.end method
+
+.method protected getScrollState()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Landroid/widget/NumberPicker;->mScrollState:I
+
+    return v0
+.end method
+
+.method protected getSelectorElementHeight()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Landroid/widget/NumberPicker;->mSelectorElementHeight:I
+
+    return v0
+.end method
+
+.method protected getSelectorIndexToStringCache()Landroid/util/SparseArray;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .annotation system Ldalvik/annotation/Signature;
+        value = {
+            "()",
+            "Landroid/util/SparseArray",
+            "<",
+            "Ljava/lang/String;",
+            ">;"
+        }
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Landroid/widget/NumberPicker;->mSelectorIndexToStringCache:Landroid/util/SparseArray;
+
+    return-object v0
+.end method
+
+.method protected getSelectorIndices()[I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Landroid/widget/NumberPicker;->mSelectorIndices:[I
+
+    return-object v0
+.end method
+
+.method protected getSelectorWheelPaint()Landroid/graphics/Paint;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Landroid/widget/NumberPicker;->mSelectorWheelPaint:Landroid/graphics/Paint;
+
+    return-object v0
+.end method
+
 .method public getSolidColor()I
     .locals 1
 
@@ -3615,6 +3834,18 @@
     return v0
 .end method
 
+.method protected getTextSize()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Landroid/widget/NumberPicker;->mTextSize:I
+
+    return v0
+.end method
+
 .method protected getTopFadingEdgeStrength()F
     .locals 1
 
@@ -3624,6 +3855,18 @@
     return v0
 .end method
 
+.method protected getTopSelectionDividerTop()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Landroid/widget/NumberPicker;->mTopSelectionDividerTop:I
+
+    return v0
+.end method
+
 .method public getValue()I
     .locals 1
 
@@ -3633,6 +3876,18 @@
     return v0
 .end method
 
+.method protected getVirtualButtonPressedDrawable()Landroid/graphics/drawable/Drawable;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Landroid/widget/NumberPicker;->mVirtualButtonPressedDrawable:Landroid/graphics/drawable/Drawable;
+
+    return-object v0
+.end method
+
 .method public getWrapSelectorWheel()Z
     .locals 1
 
@@ -3642,6 +3897,18 @@
     return v0
 .end method
 
+.method protected hasSelectorWheel()Z
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-boolean v0, p0, Landroid/widget/NumberPicker;->mHasSelectorWheel:Z
+
+    return v0
+.end method
+
 .method protected onDetachedFromWindow()V
     .locals 0
 
@@ -3814,7 +4081,9 @@
     check-cast v4, Ljava/lang/String;
 
     .local v4, scrollSelectorValue:Ljava/lang/String;
-    const/4 v11, 0x1
+    move-object/from16 v0, p0
+
+    iget v11, v0, Landroid/widget/NumberPicker;->SELECTOR_MIDDLE_ITEM_INDEX:I
 
     if-ne v3, v11, :cond_4
 
@@ -4058,12 +4327,17 @@
 
     :cond_2
     :goto_1
+    iget-boolean v3, p0, Landroid/widget/NumberPicker;->mIsV5:Z
+
+    if-nez v3, :cond_miui_0
+
     invoke-virtual {p0}, Landroid/widget/NumberPicker;->getParent()Landroid/view/ViewParent;
 
     move-result-object v3
 
     invoke-interface {v3, v1}, Landroid/view/ViewParent;->requestDisallowInterceptTouchEvent(Z)V
 
+    :cond_miui_0
     iget-object v3, p0, Landroid/widget/NumberPicker;->mFlingScroller:Landroid/widget/Scroller;
 
     invoke-virtual {v3}, Landroid/widget/Scroller;->isFinished()Z
@@ -4578,7 +4852,9 @@
 
     div-int v10, v6, v10
 
-    add-int/lit8 v8, v10, -0x1
+    iget v11, p0, Landroid/widget/NumberPicker;->SELECTOR_MIDDLE_ITEM_INDEX:I
+
+    sub-int v8, v10, v11
 
     .local v8, selectorIndexOffset:I
     if-lez v8, :cond_9
@@ -4625,6 +4901,58 @@
     .end packed-switch
 .end method
 
+.method protected reInitiate(IIIZ)V
+    .locals 1
+    .parameter "selectorWheelItemCount"
+    .parameter "maxHeight"
+    .parameter "selectionDividersDistance"
+    .parameter "needSoftInput"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iput p1, p0, Landroid/widget/NumberPicker;->SELECTOR_WHEEL_ITEM_COUNT:I
+
+    iget v0, p0, Landroid/widget/NumberPicker;->SELECTOR_WHEEL_ITEM_COUNT:I
+
+    div-int/lit8 v0, v0, 0x2
+
+    iput v0, p0, Landroid/widget/NumberPicker;->SELECTOR_MIDDLE_ITEM_INDEX:I
+
+    iget v0, p0, Landroid/widget/NumberPicker;->SELECTOR_WHEEL_ITEM_COUNT:I
+
+    new-array v0, v0, [I
+
+    iput-object v0, p0, Landroid/widget/NumberPicker;->mSelectorIndices:[I
+
+    iput p2, p0, Landroid/widget/NumberPicker;->mMaxHeight:I
+
+    iput p3, p0, Landroid/widget/NumberPicker;->mSelectionDividersDistance:I
+
+    iput-boolean p4, p0, Landroid/widget/NumberPicker;->mNeedSoftInput:Z
+
+    const/4 v0, 0x1
+
+    iput-boolean v0, p0, Landroid/widget/NumberPicker;->mIsV5:Z
+
+    return-void
+.end method
+
+.method protected remeasureMaxWidth()V
+    .locals 0
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    invoke-direct {p0}, Landroid/widget/NumberPicker;->tryComputeMaxWidth()V
+
+    invoke-virtual {p0}, Landroid/widget/NumberPicker;->invalidate()V
+
+    return-void
+.end method
+
 .method public scrollBy(II)V
     .locals 4
     .parameter "x"
@@ -4642,7 +4970,9 @@
 
     if-lez p2, :cond_1
 
-    aget v1, v0, v3
+    iget v1, p0, Landroid/widget/NumberPicker;->SELECTOR_MIDDLE_ITEM_INDEX:I
+
+    aget v1, v0, v1
 
     iget v2, p0, Landroid/widget/NumberPicker;->mMinValue:I
 
@@ -4663,7 +4993,9 @@
 
     if-gez p2, :cond_2
 
-    aget v1, v0, v3
+    iget v1, p0, Landroid/widget/NumberPicker;->SELECTOR_MIDDLE_ITEM_INDEX:I
+
+    aget v1, v0, v1
 
     iget v2, p0, Landroid/widget/NumberPicker;->mMaxValue:I
 
@@ -4704,7 +5036,9 @@
 
     invoke-direct {p0, v0}, Landroid/widget/NumberPicker;->decrementSelectorIndices([I)V
 
-    aget v1, v0, v3
+    iget v1, p0, Landroid/widget/NumberPicker;->SELECTOR_MIDDLE_ITEM_INDEX:I
+
+    aget v1, v0, v1
 
     invoke-direct {p0, v1, v3}, Landroid/widget/NumberPicker;->setValueInternal(IZ)V
 
@@ -4712,7 +5046,9 @@
 
     if-nez v1, :cond_3
 
-    aget v1, v0, v3
+    iget v1, p0, Landroid/widget/NumberPicker;->SELECTOR_MIDDLE_ITEM_INDEX:I
+
+    aget v1, v0, v1
 
     iget v2, p0, Landroid/widget/NumberPicker;->mMinValue:I
 
@@ -4748,7 +5084,9 @@
 
     invoke-direct {p0, v0}, Landroid/widget/NumberPicker;->incrementSelectorIndices([I)V
 
-    aget v1, v0, v3
+    iget v1, p0, Landroid/widget/NumberPicker;->SELECTOR_MIDDLE_ITEM_INDEX:I
+
+    aget v1, v0, v1
 
     invoke-direct {p0, v1, v3}, Landroid/widget/NumberPicker;->setValueInternal(IZ)V
 
@@ -4756,7 +5094,9 @@
 
     if-nez v1, :cond_4
 
-    aget v1, v0, v3
+    iget v1, p0, Landroid/widget/NumberPicker;->SELECTOR_MIDDLE_ITEM_INDEX:I
+
+    aget v1, v0, v1
 
     iget v2, p0, Landroid/widget/NumberPicker;->mMaxValue:I
 
diff --git a/framework.jar.out/smali/android/widget/PopupWindow.smali b/framework.jar.out/smali/android/widget/PopupWindow.smali
index aac39bb..1185355 100644
--- a/framework.jar.out/smali/android/widget/PopupWindow.smali
+++ b/framework.jar.out/smali/android/widget/PopupWindow.smali
@@ -1400,16 +1400,24 @@
     invoke-direct {v2, v4, v0}, Landroid/widget/FrameLayout$LayoutParams;-><init>(II)V
 
     .local v2, listParams:Landroid/widget/FrameLayout$LayoutParams;
-    iget-object v4, p0, Landroid/widget/PopupWindow;->mBackground:Landroid/graphics/drawable/Drawable;
-
-    invoke-virtual {v3, v4}, Landroid/widget/PopupWindow$PopupViewContainer;->setBackgroundDrawable(Landroid/graphics/drawable/Drawable;)V
-
     iget-object v4, p0, Landroid/widget/PopupWindow;->mContentView:Landroid/view/View;
 
     invoke-virtual {v3, v4, v2}, Landroid/widget/PopupWindow$PopupViewContainer;->addView(Landroid/view/View;Landroid/view/ViewGroup$LayoutParams;)V
 
     iput-object v3, p0, Landroid/widget/PopupWindow;->mPopupView:Landroid/view/View;
 
+    iget-object v0, p0, Landroid/widget/PopupWindow;->mPopupView:Landroid/view/View;
+
+    iget-boolean v1, p0, Landroid/widget/PopupWindow;->mAboveAnchor:Z
+
+    iget-object v2, p0, Landroid/widget/PopupWindow;->mBackground:Landroid/graphics/drawable/Drawable;
+
+    iget-object v3, p0, Landroid/widget/PopupWindow;->mAboveAnchorBackgroundDrawable:Landroid/graphics/drawable/Drawable;
+
+    iget-object v4, p0, Landroid/widget/PopupWindow;->mBelowAnchorBackgroundDrawable:Landroid/graphics/drawable/Drawable;
+
+    invoke-static {v0, v1, v2, v3, v4}, Landroid/widget/PopupWindow$Injector;->updateBackground(Landroid/view/View;ZLandroid/graphics/drawable/Drawable;Landroid/graphics/drawable/Drawable;Landroid/graphics/drawable/Drawable;)V
+
     .end local v0           #height:I
     .end local v1           #layoutParams:Landroid/view/ViewGroup$LayoutParams;
     .end local v2           #listParams:Landroid/widget/FrameLayout$LayoutParams;
@@ -1876,10 +1884,16 @@
 .end method
 
 .method public getBackground()Landroid/graphics/drawable/Drawable;
-    .locals 1
+    .locals 2
 
     .prologue
-    iget-object v0, p0, Landroid/widget/PopupWindow;->mBackground:Landroid/graphics/drawable/Drawable;
+    iget-object v0, p0, Landroid/widget/PopupWindow;->mPopupView:Landroid/view/View;
+
+    iget-object v1, p0, Landroid/widget/PopupWindow;->mBackground:Landroid/graphics/drawable/Drawable;
+
+    invoke-static {v0, v1}, Landroid/widget/PopupWindow$Injector;->getBackground(Landroid/view/View;Landroid/graphics/drawable/Drawable;)Landroid/graphics/drawable/Drawable;
+
+    move-result-object v0
 
     return-object v0
 .end method
diff --git a/framework.jar.out/smali/android/widget/ProgressBar.smali b/framework.jar.out/smali/android/widget/ProgressBar.smali
index f4cf0cc..22d2767 100644
--- a/framework.jar.out/smali/android/widget/ProgressBar.smali
+++ b/framework.jar.out/smali/android/widget/ProgressBar.smali
@@ -895,6 +895,14 @@
     .parameter "drawable"
 
     .prologue
+
+    invoke-virtual {p0, p1}, Landroid/widget/ProgressBar;->tileifyIndeterminateMiui(Landroid/graphics/drawable/Drawable;)Landroid/graphics/drawable/Drawable;
+
+    move-result-object v0
+
+    return-object v0
+    ####### end ################
+
     const/16 v7, 0x2710
 
     instance-of v5, p1, Landroid/graphics/drawable/AnimationDrawable;
@@ -1167,6 +1175,20 @@
     return-void
 .end method
 
+.method public getBgDrawable()Landroid/graphics/drawable/Drawable;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    invoke-virtual {p0}, Landroid/widget/ProgressBar;->getCurrentDrawable()Landroid/graphics/drawable/Drawable;
+
+    move-result-object v0
+
+    return-object v0
+.end method
+
 .method getCurrentDrawable()Landroid/graphics/drawable/Drawable;
     .locals 1
 
@@ -2689,6 +2711,84 @@
     return-void
 .end method
 
+.method public tileifyIndeterminateMiui(Landroid/graphics/drawable/Drawable;)Landroid/graphics/drawable/Drawable;
+    .locals 8
+    .parameter "drawable"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    const/16 v7, 0x2710
+
+    instance-of v5, p1, Landroid/graphics/drawable/AnimationDrawable;
+
+    if-eqz v5, :cond_1
+
+    move-object v1, p1
+
+    check-cast v1, Landroid/graphics/drawable/AnimationDrawable;
+
+    .local v1, background:Landroid/graphics/drawable/AnimationDrawable;
+    invoke-virtual {v1}, Landroid/graphics/drawable/AnimationDrawable;->getNumberOfFrames()I
+
+    move-result v0
+
+    .local v0, N:I
+    new-instance v4, Landroid/graphics/drawable/AnimationDrawable;
+
+    invoke-direct {v4}, Landroid/graphics/drawable/AnimationDrawable;-><init>()V
+
+    .local v4, newBg:Landroid/graphics/drawable/AnimationDrawable;
+    invoke-virtual {v1}, Landroid/graphics/drawable/AnimationDrawable;->isOneShot()Z
+
+    move-result v5
+
+    invoke-virtual {v4, v5}, Landroid/graphics/drawable/AnimationDrawable;->setOneShot(Z)V
+
+    const/4 v3, 0x0
+
+    .local v3, i:I
+    :goto_0
+    if-ge v3, v0, :cond_0
+
+    invoke-virtual {v1, v3}, Landroid/graphics/drawable/AnimationDrawable;->getFrame(I)Landroid/graphics/drawable/Drawable;
+
+    move-result-object v5
+
+    const/4 v6, 0x1
+
+    invoke-direct {p0, v5, v6}, Landroid/widget/ProgressBar;->tileify(Landroid/graphics/drawable/Drawable;Z)Landroid/graphics/drawable/Drawable;
+
+    move-result-object v2
+
+    .local v2, frame:Landroid/graphics/drawable/Drawable;
+    invoke-virtual {v2, v7}, Landroid/graphics/drawable/Drawable;->setLevel(I)Z
+
+    invoke-virtual {v1, v3}, Landroid/graphics/drawable/AnimationDrawable;->getDuration(I)I
+
+    move-result v5
+
+    invoke-virtual {v4, v2, v5}, Landroid/graphics/drawable/AnimationDrawable;->addFrame(Landroid/graphics/drawable/Drawable;I)V
+
+    add-int/lit8 v3, v3, 0x1
+
+    goto :goto_0
+
+    .end local v2           #frame:Landroid/graphics/drawable/Drawable;
+    :cond_0
+    invoke-virtual {v4, v7}, Landroid/graphics/drawable/AnimationDrawable;->setLevel(I)Z
+
+    move-object p1, v4
+
+    .end local v0           #N:I
+    .end local v1           #background:Landroid/graphics/drawable/AnimationDrawable;
+    .end local v3           #i:I
+    .end local v4           #newBg:Landroid/graphics/drawable/AnimationDrawable;
+    :cond_1
+    return-object p1
+.end method
+
 .method protected verifyDrawable(Landroid/graphics/drawable/Drawable;)Z
     .locals 1
     .parameter "who"
diff --git a/framework.jar.out/smali/android/widget/QuickContactBadge.smali b/framework.jar.out/smali/android/widget/QuickContactBadge.smali
index 7366200..78d5a7f 100644
--- a/framework.jar.out/smali/android/widget/QuickContactBadge.smali
+++ b/framework.jar.out/smali/android/widget/QuickContactBadge.smali
@@ -510,6 +510,10 @@
 
     move-result v2
 
+    iget v3, p0, Landroid/widget/QuickContactBadge;->mPaddingLeft:I
+
+    sub-int/2addr v2, v3
+
     iget v3, p0, Landroid/widget/QuickContactBadge;->mPaddingRight:I
 
     sub-int/2addr v2, v3
@@ -518,6 +522,10 @@
 
     move-result v3
 
+    iget v0, p0, Landroid/widget/QuickContactBadge;->mPaddingTop:I
+
+    sub-int/2addr v3, v0
+
     iget v4, p0, Landroid/widget/QuickContactBadge;->mPaddingBottom:I
 
     sub-int/2addr v3, v4
diff --git a/framework.jar.out/smali/android/widget/SearchView.smali b/framework.jar.out/smali/android/widget/SearchView.smali
index a880580..5514093 100644
--- a/framework.jar.out/smali/android/widget/SearchView.smali
+++ b/framework.jar.out/smali/android/widget/SearchView.smali
@@ -1398,6 +1398,16 @@
     .prologue
     const/4 v7, 0x0
 
+    iget-object v3, p0, Landroid/widget/SearchView;->mContext:Landroid/content/Context;
+
+    invoke-static {v3}, Lmiui/util/UiUtils;->isV5Ui(Landroid/content/Context;)Z
+
+    move-result v3
+
+    if-eqz v3, :cond_miui_0
+
+    return-object p1
+    :cond_miui_0
     iget-boolean v3, p0, Landroid/widget/SearchView;->mIconifiedByDefault:Z
 
     if-nez v3, :cond_0
@@ -1779,6 +1789,156 @@
     goto :goto_0
 .end method
 
+.method private miuiUpdateFocusedState()Z
+    .locals 4
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    const/4 v1, 0x0
+
+    .local v1, retval:Z
+    iget-object v2, p0, Landroid/widget/SearchView;->mContext:Landroid/content/Context;
+
+    invoke-static {v2}, Lmiui/util/UiUtils;->isV5Ui(Landroid/content/Context;)Z
+
+    move-result v2
+
+    if-eqz v2, :cond_0
+
+    iget-object v2, p0, Landroid/widget/SearchView;->mQueryTextView:Landroid/widget/SearchView$SearchAutoComplete;
+
+    invoke-virtual {v2}, Landroid/widget/SearchView$SearchAutoComplete;->hasFocus()Z
+
+    move-result v0
+
+    .local v0, focused:Z
+    iget-object v2, p0, Landroid/widget/SearchView;->mSearchEditFrame:Landroid/view/View;
+
+    invoke-virtual {v2}, Landroid/view/View;->getBackground()Landroid/graphics/drawable/Drawable;
+
+    move-result-object v3
+
+    if-eqz v0, :cond_1
+
+    sget-object v2, Landroid/widget/SearchView;->FOCUSED_STATE_SET:[I
+
+    :goto_0
+    invoke-virtual {v3, v2}, Landroid/graphics/drawable/Drawable;->setState([I)Z
+
+    iget-object v2, p0, Landroid/widget/SearchView;->mSubmitArea:Landroid/view/View;
+
+    invoke-virtual {v2}, Landroid/view/View;->getBackground()Landroid/graphics/drawable/Drawable;
+
+    move-result-object v3
+
+    if-eqz v0, :cond_2
+
+    sget-object v2, Landroid/widget/SearchView;->FOCUSED_STATE_SET:[I
+
+    :goto_1
+    invoke-virtual {v3, v2}, Landroid/graphics/drawable/Drawable;->setState([I)Z
+
+    invoke-virtual {p0}, Landroid/widget/SearchView;->invalidate()V
+
+    const/4 v1, 0x1
+
+    .end local v0           #focused:Z
+    :cond_0
+    return v1
+
+    .restart local v0       #focused:Z
+    :cond_1
+    sget-object v2, Landroid/widget/SearchView;->EMPTY_STATE_SET:[I
+
+    goto :goto_0
+
+    :cond_2
+    sget-object v2, Landroid/widget/SearchView;->EMPTY_STATE_SET:[I
+
+    goto :goto_1
+.end method
+
+.method private miuiUpdateSubmitArea()V
+    .locals 6
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v5, p0, Landroid/widget/SearchView;->mContext:Landroid/content/Context;
+
+    invoke-static {v5}, Lmiui/util/UiUtils;->isV5Ui(Landroid/content/Context;)Z
+
+    move-result v5
+
+    if-nez v5, :cond_0
+
+    :goto_0
+    return-void
+
+    :cond_0
+    iget-object v5, p0, Landroid/widget/SearchView;->mSearchEditFrame:Landroid/view/View;
+
+    invoke-virtual {v5}, Landroid/view/View;->getPaddingLeft()I
+
+    move-result v1
+
+    .local v1, leftPadding:I
+    iget-object v5, p0, Landroid/widget/SearchView;->mSearchEditFrame:Landroid/view/View;
+
+    invoke-virtual {v5}, Landroid/view/View;->getPaddingTop()I
+
+    move-result v4
+
+    .local v4, topPadding:I
+    new-instance v2, Landroid/graphics/Rect;
+
+    invoke-direct {v2}, Landroid/graphics/Rect;-><init>()V
+
+    .local v2, paddingRect:Landroid/graphics/Rect;
+    iget-object v5, p0, Landroid/widget/SearchView;->mSearchEditFrame:Landroid/view/View;
+
+    invoke-virtual {v5}, Landroid/view/View;->getBackground()Landroid/graphics/drawable/Drawable;
+
+    move-result-object v5
+
+    invoke-virtual {v5, v2}, Landroid/graphics/drawable/Drawable;->getPadding(Landroid/graphics/Rect;)Z
+
+    iget-object v5, p0, Landroid/widget/SearchView;->mSubmitArea:Landroid/view/View;
+
+    invoke-virtual {v5}, Landroid/view/View;->getVisibility()I
+
+    move-result v5
+
+    if-nez v5, :cond_1
+
+    const/4 v3, 0x0
+
+    .local v3, rightPadding:I
+    :goto_1
+    iget-object v5, p0, Landroid/widget/SearchView;->mSearchEditFrame:Landroid/view/View;
+
+    invoke-virtual {v5}, Landroid/view/View;->getPaddingBottom()I
+
+    move-result v0
+
+    .local v0, bottomPadding:I
+    iget-object v5, p0, Landroid/widget/SearchView;->mSearchEditFrame:Landroid/view/View;
+
+    invoke-virtual {v5, v1, v4, v3, v0}, Landroid/view/View;->setPadding(IIII)V
+
+    goto :goto_0
+
+    .end local v0           #bottomPadding:I
+    .end local v3           #rightPadding:I
+    :cond_1
+    iget v3, v2, Landroid/graphics/Rect;->right:I
+
+    goto :goto_1
+.end method
+
 .method private onCloseClicked()V
     .locals 4
 
@@ -2580,6 +2740,15 @@
     .locals 3
 
     .prologue
+    invoke-direct {p0}, Landroid/widget/SearchView;->miuiUpdateFocusedState()Z
+
+    move-result v1
+
+    if-eqz v1, :cond_miui_0
+
+    return-void
+
+    :cond_miui_0
     iget-object v1, p0, Landroid/widget/SearchView;->mQueryTextView:Landroid/widget/SearchView$SearchAutoComplete;
 
     invoke-virtual {v1}, Landroid/widget/SearchView$SearchAutoComplete;->hasFocus()Z
@@ -2865,6 +3034,8 @@
 
     invoke-virtual {v1, v0}, Landroid/view/View;->setVisibility(I)V
 
+    invoke-direct {p0}, Landroid/widget/SearchView;->miuiUpdateSubmitArea()V
+
     return-void
 .end method
 
diff --git a/framework.jar.out/smali/android/widget/TextView.smali b/framework.jar.out/smali/android/widget/TextView.smali
index 6dd981e..e72d0c8 100644
--- a/framework.jar.out/smali/android/widget/TextView.smali
+++ b/framework.jar.out/smali/android/widget/TextView.smali
@@ -7419,7 +7419,7 @@
 
     move-object/from16 v0, v17
 
-    invoke-static {v0, v4}, Landroid/text/util/Linkify;->addLinks(Landroid/text/Spannable;I)Z
+    invoke-static {v0, v4}, Lmiui/text/util/Linkify;->addLinks(Landroid/text/Spannable;I)Z
 
     move-result v4
 
@@ -21915,6 +21915,48 @@
     return-void
 .end method
 
+.method public setCursorDrawableRes(I)V
+    .locals 3
+    .parameter "cursorDrawableRes"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iput p1, p0, Landroid/widget/TextView;->mCursorDrawableRes:I
+
+    const/4 v0, 0x0
+
+    .local v0, i:I
+    :goto_0
+    iget-object v1, p0, Landroid/widget/TextView;->mEditor:Landroid/widget/Editor;
+
+    iget v1, v1, Landroid/widget/Editor;->mCursorCount:I
+
+    if-ge v0, v1, :cond_0
+
+    iget-object v1, p0, Landroid/widget/TextView;->mEditor:Landroid/widget/Editor;
+
+    iget-object v1, v1, Landroid/widget/Editor;->mCursorDrawable:[Landroid/graphics/drawable/Drawable;
+
+    const/4 v2, 0x0
+
+    aput-object v2, v1, v0
+
+    add-int/lit8 v0, v0, 0x1
+
+    goto :goto_0
+
+    :cond_0
+    iget-object v1, p0, Landroid/widget/TextView;->mEditor:Landroid/widget/Editor;
+
+    const/4 v2, 0x0
+
+    iput v2, v1, Landroid/widget/Editor;->mCursorCount:I
+
+    return-void
+.end method
+
 .method protected setCursorPosition_internal(II)V
     .locals 1
     .parameter "start"
@@ -23712,6 +23754,19 @@
     return-void
 .end method
 
+.method public final setSoftInputShownOnFocus(Z)V
+    .locals 0
+    .parameter "show"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    invoke-virtual {p0, p1}, Landroid/widget/TextView;->setShowSoftInputOnFocus(Z)V
+
+    return-void
+.end method
+
 .method protected setSpan_internal(Ljava/lang/Object;III)V
     .locals 1
     .parameter "span"
diff --git a/framework.jar.out/smali/android/widget/TimePicker.smali b/framework.jar.out/smali/android/widget/TimePicker.smali
index 18f6362..679c9f2 100644
--- a/framework.jar.out/smali/android/widget/TimePicker.smali
+++ b/framework.jar.out/smali/android/widget/TimePicker.smali
@@ -482,6 +482,40 @@
     return-object v0
 .end method
 
+.method private changePositionState(Z)V
+    .locals 2
+    .parameter "is24HourView"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Landroid/widget/TimePicker;->mMinuteSpinner:Landroid/widget/NumberPicker;
+
+    instance-of v0, v0, Lmiui/widget/NumberPicker;
+
+    if-eqz v0, :cond_0
+
+    iget-object v0, p0, Landroid/widget/TimePicker;->mMinuteSpinner:Landroid/widget/NumberPicker;
+
+    check-cast v0, Lmiui/widget/NumberPicker;
+
+    if-eqz p1, :cond_1
+
+    const/4 v1, 0x1
+
+    :goto_0
+    invoke-virtual {v0, v1}, Lmiui/widget/NumberPicker;->setPositionState(I)V
+
+    :cond_0
+    return-void
+
+    :cond_1
+    const/4 v1, 0x3
+
+    goto :goto_0
+.end method
+
 .method private onTimeChanged()V
     .locals 3
 
@@ -1359,6 +1393,12 @@
 
     iput-boolean v1, p0, Landroid/widget/TimePicker;->mIs24HourView:Z
 
+    invoke-virtual {p1}, Ljava/lang/Boolean;->booleanValue()Z
+
+    move-result v1
+
+    invoke-direct {p0, v1}, Landroid/widget/TimePicker;->changePositionState(Z)V
+
     invoke-virtual {p0}, Landroid/widget/TimePicker;->getCurrentHour()Ljava/lang/Integer;
 
     move-result-object v1
diff --git a/framework.jar.out/smali/com/android/internal/app/ActionBarImpl.smali b/framework.jar.out/smali/com/android/internal/app/ActionBarImpl.smali
index 03fead6..32e00a2 100644
--- a/framework.jar.out/smali/com/android/internal/app/ActionBarImpl.smali
+++ b/framework.jar.out/smali/com/android/internal/app/ActionBarImpl.smali
@@ -546,11 +546,11 @@
     return-void
 
     :cond_0
-    new-instance v0, Lcom/android/internal/widget/ScrollingTabContainerView;
-
     iget-object v1, p0, Lcom/android/internal/app/ActionBarImpl;->mContext:Landroid/content/Context;
 
-    invoke-direct {v0, v1}, Lcom/android/internal/widget/ScrollingTabContainerView;-><init>(Landroid/content/Context;)V
+    invoke-static {v1}, Lcom/android/internal/app/ActionBarImpl$Injector;->getScrollingTabContainerView(Landroid/content/Context;)Lcom/android/internal/widget/ScrollingTabContainerView;
+
+    move-result-object v0
 
     .local v0, tabScroller:Lcom/android/internal/widget/ScrollingTabContainerView;
     iget-boolean v1, p0, Lcom/android/internal/app/ActionBarImpl;->mHasEmbeddedTabs:Z
@@ -869,6 +869,15 @@
 
     const/4 v2, 0x0
 
+    invoke-virtual {p0, p1}, Lcom/android/internal/app/ActionBarImpl;->miuiSetHasEmbeddedTabs(Z)Z
+
+    move-result v3
+
+    if-eqz v3, :cond_miui_0
+
+    return-void
+
+    :cond_miui_0
     iput-boolean p1, p0, Lcom/android/internal/app/ActionBarImpl;->mHasEmbeddedTabs:Z
 
     iget-boolean v3, p0, Lcom/android/internal/app/ActionBarImpl;->mHasEmbeddedTabs:Z
@@ -1740,6 +1749,66 @@
     .end array-data
 .end method
 
+.method protected getActionBarOverlayLayout()Lcom/android/internal/widget/ActionBarOverlayLayout;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/app/ActionBarImpl;->mOverlayLayout:Lcom/android/internal/widget/ActionBarOverlayLayout;
+
+    return-object v0
+.end method
+
+.method protected getActionView()Lcom/android/internal/widget/ActionBarView;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/app/ActionBarImpl;->mActionView:Lcom/android/internal/widget/ActionBarView;
+
+    return-object v0
+.end method
+
+.method protected getContainerView()Lcom/android/internal/widget/ActionBarContainer;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/app/ActionBarImpl;->mContainerView:Lcom/android/internal/widget/ActionBarContainer;
+
+    return-object v0
+.end method
+
+.method protected getContextDisplayMode()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Lcom/android/internal/app/ActionBarImpl;->mContextDisplayMode:I
+
+    return v0
+.end method
+
+.method protected getContextView()Lcom/android/internal/widget/ActionBarContextView;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/app/ActionBarImpl;->mContextView:Lcom/android/internal/widget/ActionBarContextView;
+
+    return-object v0
+.end method
+
 .method public getCustomView()Landroid/view/View;
     .locals 1
 
@@ -1902,6 +1971,18 @@
     return-object v0
 .end method
 
+.method protected getSplitView()Lcom/android/internal/widget/ActionBarContainer;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/app/ActionBarImpl;->mSplitView:Lcom/android/internal/widget/ActionBarContainer;
+
+    return-object v0
+.end method
+
 .method public getSubtitle()Ljava/lang/CharSequence;
     .locals 1
 
@@ -1944,6 +2025,18 @@
     return v0
 .end method
 
+.method protected getTabScrollView()Lcom/android/internal/widget/ScrollingTabContainerView;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/app/ActionBarImpl;->mTabScrollView:Lcom/android/internal/widget/ScrollingTabContainerView;
+
+    return-object v0
+.end method
+
 .method public getThemedContext()Landroid/content/Context;
     .locals 5
 
@@ -2117,6 +2210,164 @@
     goto :goto_0
 .end method
 
+.method protected miuiSetHasEmbeddedTabs(Z)Z
+    .locals 6
+    .parameter "hasEmbeddedTabs"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    const/4 v5, 0x0
+
+    const/4 v2, 0x1
+
+    const/4 v3, 0x0
+
+    iget-object v4, p0, Lcom/android/internal/app/ActionBarImpl;->mContext:Landroid/content/Context;
+
+    invoke-static {v4}, Lmiui/util/UiUtils;->isV5Ui(Landroid/content/Context;)Z
+
+    move-result v4
+
+    if-nez v4, :cond_0
+
+    :goto_0
+    return v3
+
+    :cond_0
+    invoke-virtual {p0}, Lcom/android/internal/app/ActionBarImpl;->getDisplayOptions()I
+
+    move-result v4
+
+    and-int/lit8 v4, v4, 0xa
+
+    if-eqz v4, :cond_4
+
+    move v1, v2
+
+    .local v1, showTitleOrHome:Z
+    :goto_1
+    if-eqz p1, :cond_5
+
+    if-nez v1, :cond_5
+
+    move p1, v2
+
+    :goto_2
+    iget-boolean v4, p0, Lcom/android/internal/app/ActionBarImpl;->mHasEmbeddedTabs:Z
+
+    if-eq v4, p1, :cond_3
+
+    iput-boolean p1, p0, Lcom/android/internal/app/ActionBarImpl;->mHasEmbeddedTabs:Z
+
+    iget-boolean v4, p0, Lcom/android/internal/app/ActionBarImpl;->mHasEmbeddedTabs:Z
+
+    if-nez v4, :cond_6
+
+    iget-object v4, p0, Lcom/android/internal/app/ActionBarImpl;->mActionView:Lcom/android/internal/widget/ActionBarView;
+
+    invoke-virtual {v4, v5}, Lcom/android/internal/widget/ActionBarView;->setEmbeddedTabView(Lcom/android/internal/widget/ScrollingTabContainerView;)V
+
+    iget-object v4, p0, Lcom/android/internal/app/ActionBarImpl;->mContainerView:Lcom/android/internal/widget/ActionBarContainer;
+
+    iget-object v5, p0, Lcom/android/internal/app/ActionBarImpl;->mTabScrollView:Lcom/android/internal/widget/ScrollingTabContainerView;
+
+    invoke-virtual {v4, v5}, Lcom/android/internal/widget/ActionBarContainer;->setTabContainer(Lcom/android/internal/widget/ScrollingTabContainerView;)V
+
+    :goto_3
+    invoke-virtual {p0}, Lcom/android/internal/app/ActionBarImpl;->getNavigationMode()I
+
+    move-result v4
+
+    const/4 v5, 0x2
+
+    if-ne v4, v5, :cond_7
+
+    move v0, v2
+
+    .local v0, isInTabMode:Z
+    :goto_4
+    iget-object v4, p0, Lcom/android/internal/app/ActionBarImpl;->mTabScrollView:Lcom/android/internal/widget/ScrollingTabContainerView;
+
+    if-eqz v4, :cond_1
+
+    if-eqz v0, :cond_8
+
+    iget-object v4, p0, Lcom/android/internal/app/ActionBarImpl;->mTabScrollView:Lcom/android/internal/widget/ScrollingTabContainerView;
+
+    invoke-virtual {v4, v3}, Lcom/android/internal/widget/ScrollingTabContainerView;->setVisibility(I)V
+
+    iget-object v4, p0, Lcom/android/internal/app/ActionBarImpl;->mOverlayLayout:Lcom/android/internal/widget/ActionBarOverlayLayout;
+
+    if-eqz v4, :cond_1
+
+    iget-object v4, p0, Lcom/android/internal/app/ActionBarImpl;->mOverlayLayout:Lcom/android/internal/widget/ActionBarOverlayLayout;
+
+    invoke-virtual {v4}, Lcom/android/internal/widget/ActionBarOverlayLayout;->requestFitSystemWindows()V
+
+    :cond_1
+    :goto_5
+    iget-object v4, p0, Lcom/android/internal/app/ActionBarImpl;->mActionView:Lcom/android/internal/widget/ActionBarView;
+
+    iget-boolean v5, p0, Lcom/android/internal/app/ActionBarImpl;->mHasEmbeddedTabs:Z
+
+    if-nez v5, :cond_2
+
+    if-eqz v0, :cond_2
+
+    move v3, v2
+
+    :cond_2
+    invoke-virtual {v4, v3}, Lcom/android/internal/widget/ActionBarView;->setCollapsable(Z)V
+
+    .end local v0           #isInTabMode:Z
+    :cond_3
+    move v3, v2
+
+    goto :goto_0
+
+    .end local v1           #showTitleOrHome:Z
+    :cond_4
+    move v1, v3
+
+    goto :goto_1
+
+    .restart local v1       #showTitleOrHome:Z
+    :cond_5
+    move p1, v3
+
+    goto :goto_2
+
+    :cond_6
+    iget-object v4, p0, Lcom/android/internal/app/ActionBarImpl;->mContainerView:Lcom/android/internal/widget/ActionBarContainer;
+
+    invoke-virtual {v4, v5}, Lcom/android/internal/widget/ActionBarContainer;->setTabContainer(Lcom/android/internal/widget/ScrollingTabContainerView;)V
+
+    iget-object v4, p0, Lcom/android/internal/app/ActionBarImpl;->mActionView:Lcom/android/internal/widget/ActionBarView;
+
+    iget-object v5, p0, Lcom/android/internal/app/ActionBarImpl;->mTabScrollView:Lcom/android/internal/widget/ScrollingTabContainerView;
+
+    invoke-virtual {v4, v5}, Lcom/android/internal/widget/ActionBarView;->setEmbeddedTabView(Lcom/android/internal/widget/ScrollingTabContainerView;)V
+
+    goto :goto_3
+
+    :cond_7
+    move v0, v3
+
+    goto :goto_4
+
+    .restart local v0       #isInTabMode:Z
+    :cond_8
+    iget-object v4, p0, Lcom/android/internal/app/ActionBarImpl;->mTabScrollView:Lcom/android/internal/widget/ScrollingTabContainerView;
+
+    const/16 v5, 0x8
+
+    invoke-virtual {v4, v5}, Lcom/android/internal/widget/ScrollingTabContainerView;->setVisibility(I)V
+
+    goto :goto_5
+.end method
+
 .method public newTab()Landroid/app/ActionBar$Tab;
     .locals 1
 
diff --git a/framework.jar.out/smali/com/android/internal/app/ResolverActivity$ResolveListAdapter.smali b/framework.jar.out/smali/com/android/internal/app/ResolverActivity$ResolveListAdapter.smali
index 25875f7..bec3e24 100644
--- a/framework.jar.out/smali/com/android/internal/app/ResolverActivity$ResolveListAdapter.smali
+++ b/framework.jar.out/smali/com/android/internal/app/ResolverActivity$ResolveListAdapter.smali
@@ -208,6 +208,16 @@
 
     invoke-virtual {v0, v3}, Landroid/widget/ImageView;->setImageDrawable(Landroid/graphics/drawable/Drawable;)V
 
+    iget-object v3, p0, Lcom/android/internal/app/ResolverActivity$ResolveListAdapter;->this$0:Lcom/android/internal/app/ResolverActivity;
+
+    iget-object v4, p0, Lcom/android/internal/app/ResolverActivity$ResolveListAdapter;->mList:Ljava/util/List;
+
+    invoke-interface {v4, p2}, Ljava/util/List;->indexOf(Ljava/lang/Object;)I
+
+    move-result v4
+
+    invoke-static {v0, v3, p0, v4}, Lcom/android/internal/app/ResolverActivity$Injector;->addListener(Landroid/view/View;Lcom/android/internal/app/ResolverActivity;Lcom/android/internal/app/ResolverActivity$ResolveListAdapter;I)V
+
     return-void
 
     :cond_1
@@ -1124,6 +1134,15 @@
     move-result-object v1
 
     .local v1, lp:Landroid/view/ViewGroup$LayoutParams;
+    iget v3, v1, Landroid/view/ViewGroup$LayoutParams;->width:I
+
+    if-eqz v3, :cond_miui_0
+
+    iget v3, v1, Landroid/view/ViewGroup$LayoutParams;->height:I
+
+    if-nez v3, :cond_miui_1
+
+    :cond_miui_0
     iget-object v3, p0, Lcom/android/internal/app/ResolverActivity$ResolveListAdapter;->this$0:Lcom/android/internal/app/ResolverActivity;
 
     #getter for: Lcom/android/internal/app/ResolverActivity;->mIconSize:I
@@ -1137,6 +1156,7 @@
 
     .end local v0           #icon:Landroid/widget/ImageView;
     .end local v1           #lp:Landroid/view/ViewGroup$LayoutParams;
+    :cond_miui_1
     :goto_0
     iget-object v3, p0, Lcom/android/internal/app/ResolverActivity$ResolveListAdapter;->mList:Ljava/util/List;
 
diff --git a/framework.jar.out/smali/com/android/internal/app/ResolverActivity.smali b/framework.jar.out/smali/com/android/internal/app/ResolverActivity.smali
index d79b189..6b360d1 100644
--- a/framework.jar.out/smali/com/android/internal/app/ResolverActivity.smali
+++ b/framework.jar.out/smali/com/android/internal/app/ResolverActivity.smali
@@ -126,6 +126,33 @@
     return v0
 .end method
 
+.method private checkOption(Z)Z
+    .locals 1
+    .parameter "alwaysUseOption"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    if-eqz p1, :cond_0
+
+    invoke-static {p0}, Lmiui/util/UiUtils;->isV5Ui(Landroid/content/Context;)Z
+
+    move-result v0
+
+    if-nez v0, :cond_0
+
+    const/4 v0, 0x1
+
+    :goto_0
+    return v0
+
+    :cond_0
+    const/4 v0, 0x0
+
+    goto :goto_0
+.end method
+
 .method private makeMyIntent()Landroid/content/Intent;
     .locals 3
 
@@ -366,7 +393,7 @@
 
     .prologue
     .local p5, rList:Ljava/util/List;,"Ljava/util/List<Landroid/content/pm/ResolveInfo;>;"
-    const v1, 0x1030302
+    const v1, 0x60d003e
 
     invoke-virtual {p0, v1}, Lcom/android/internal/app/ResolverActivity;->setTheme(I)V
 
@@ -400,13 +427,7 @@
 
     iput-boolean v0, p0, Lcom/android/internal/app/ResolverActivity;->mAlwaysUseOption:Z
 
-    invoke-virtual {p0}, Lcom/android/internal/app/ResolverActivity;->getResources()Landroid/content/res/Resources;
-
-    move-result-object v1
-
-    const v2, 0x10e0032
-
-    invoke-virtual {v1, v2}, Landroid/content/res/Resources;->getInteger(I)I
+    invoke-static {p0}, Lcom/android/internal/app/ResolverActivity$Injector;->getMaxColumns(Lcom/android/internal/app/ResolverActivity;)I
 
     move-result v1
 
@@ -500,6 +521,10 @@
 
     :cond_1
     :goto_1
+    move/from16 v0, p6
+
+    invoke-static {p0, v0}, Lcom/android/internal/app/ResolverActivity$Injector;->initialize(Lcom/android/internal/app/ResolverActivity;Z)V
+
     return-void
 
     .end local v8           #am:Landroid/app/ActivityManager;
@@ -582,7 +607,13 @@
     :goto_2
     invoke-virtual {p0}, Lcom/android/internal/app/ResolverActivity;->setupAlert()V
 
-    if-eqz p6, :cond_1
+    move/from16 v0, p6
+
+    invoke-direct {p0, v0}, Lcom/android/internal/app/ResolverActivity;->checkOption(Z)Z
+
+    move-result v1
+
+    if-eqz v1, :cond_1
 
     const v1, 0x102026d
 
@@ -1348,6 +1379,19 @@
     return-void
 .end method
 
+.method setAlwaysUseOption(Z)V
+    .locals 0
+    .parameter "alwaysUseOption"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iput-boolean p1, p0, Lcom/android/internal/app/ResolverActivity;->mAlwaysUseOption:Z
+
+    return-void
+.end method
+
 .method showAppDetails(Landroid/content/pm/ResolveInfo;)V
     .locals 5
     .parameter "ri"
diff --git a/framework.jar.out/smali/com/android/internal/statusbar/IStatusBar$Stub$Proxy.smali b/framework.jar.out/smali/com/android/internal/statusbar/IStatusBar$Stub$Proxy.smali
index f320fde..e086fb1 100644
--- a/framework.jar.out/smali/com/android/internal/statusbar/IStatusBar$Stub$Proxy.smali
+++ b/framework.jar.out/smali/com/android/internal/statusbar/IStatusBar$Stub$Proxy.smali
@@ -623,6 +623,77 @@
     throw v1
 .end method
 
+.method public setStatus(ILjava/lang/String;Landroid/os/Bundle;)V
+    .locals 5
+    .parameter "what"
+    .parameter "action"
+    .parameter "ext"
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .local v0, _data:Landroid/os/Parcel;
+    :try_start_0
+    const-string v1, "com.android.internal.statusbar.IStatusBar"
+
+    invoke-virtual {v0, v1}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    invoke-virtual {v0, p1}, Landroid/os/Parcel;->writeInt(I)V
+
+    invoke-virtual {v0, p2}, Landroid/os/Parcel;->writeString(Ljava/lang/String;)V
+
+    if-eqz p3, :cond_0
+
+    const/4 v1, 0x1
+
+    invoke-virtual {v0, v1}, Landroid/os/Parcel;->writeInt(I)V
+
+    const/4 v1, 0x0
+
+    invoke-virtual {p3, v0, v1}, Landroid/os/Bundle;->writeToParcel(Landroid/os/Parcel;I)V
+
+    :goto_0
+    iget-object v1, p0, Lcom/android/internal/statusbar/IStatusBar$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/16 v2, 0x10
+
+    const/4 v3, 0x0
+
+    const/4 v4, 0x1
+
+    invoke-interface {v1, v2, v0, v3, v4}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    return-void
+
+    :cond_0
+    const/4 v1, 0x0
+
+    :try_start_1
+    invoke-virtual {v0, v1}, Landroid/os/Parcel;->writeInt(I)V
+    :try_end_1
+    .catchall {:try_start_1 .. :try_end_1} :catchall_0
+
+    goto :goto_0
+
+    :catchall_0
+    move-exception v1
+
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    throw v1
+.end method
+
 .method public setSystemUiVisibility(II)V
     .locals 5
     .parameter "vis"
diff --git a/framework.jar.out/smali/com/android/internal/statusbar/IStatusBar$Stub.smali b/framework.jar.out/smali/com/android/internal/statusbar/IStatusBar$Stub.smali
index fb5712b..88999a2 100644
--- a/framework.jar.out/smali/com/android/internal/statusbar/IStatusBar$Stub.smali
+++ b/framework.jar.out/smali/com/android/internal/statusbar/IStatusBar$Stub.smali
@@ -48,6 +48,8 @@
 
 .field static final TRANSACTION_setImeWindowStatus:I = 0xb
 
+.field static final TRANSACTION_setStatus:I = 0x10
+
 .field static final TRANSACTION_setSystemUiVisibility:I = 0x9
 
 .field static final TRANSACTION_toggleRecentApps:I = 0xd
@@ -475,6 +477,48 @@
 
     goto/16 :goto_0
 
+    :sswitch_10
+    const-string v4, "com.android.internal.statusbar.IStatusBar"
+
+    invoke-virtual {p2, v4}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    invoke-virtual {p2}, Landroid/os/Parcel;->readInt()I
+
+    move-result v0
+
+    .local v0, _arg0:I
+    invoke-virtual {p2}, Landroid/os/Parcel;->readString()Ljava/lang/String;
+
+    move-result-object v1
+
+    .local v1, _arg1:Ljava/lang/String;
+    invoke-virtual {p2}, Landroid/os/Parcel;->readInt()I
+
+    move-result v4
+
+    if-eqz v4, :cond_6
+
+    sget-object v4, Landroid/os/Bundle;->CREATOR:Landroid/os/Parcelable$Creator;
+
+    invoke-interface {v4, p2}, Landroid/os/Parcelable$Creator;->createFromParcel(Landroid/os/Parcel;)Ljava/lang/Object;
+
+    move-result-object v2
+
+    check-cast v2, Landroid/os/Bundle;
+
+    .local v2, _arg2:Landroid/os/Bundle;
+    :goto_7
+    invoke-virtual {p0, v0, v1, v2}, Lcom/android/internal/statusbar/IStatusBar$Stub;->setStatus(ILjava/lang/String;Landroid/os/Bundle;)V
+
+    goto/16 :goto_0
+
+    .end local v2           #_arg2:Landroid/os/Bundle;
+    :cond_6
+    const/4 v2, 0x0
+
+    .restart local v2       #_arg2:Landroid/os/Bundle;
+    goto :goto_7
+
     :sswitch_data_0
     .sparse-switch
         0x1 -> :sswitch_1
@@ -492,6 +536,7 @@
         0xd -> :sswitch_d
         0xe -> :sswitch_e
         0xf -> :sswitch_f
+        0x10 -> :sswitch_10
         0x5f4e5446 -> :sswitch_0
     .end sparse-switch
 .end method
diff --git a/framework.jar.out/smali/com/android/internal/statusbar/IStatusBar.smali b/framework.jar.out/smali/com/android/internal/statusbar/IStatusBar.smali
index 97170aa..dd796e9 100644
--- a/framework.jar.out/smali/com/android/internal/statusbar/IStatusBar.smali
+++ b/framework.jar.out/smali/com/android/internal/statusbar/IStatusBar.smali
@@ -103,6 +103,14 @@
     .end annotation
 .end method
 
+.method public abstract setStatus(ILjava/lang/String;Landroid/os/Bundle;)V
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
+
 .method public abstract setSystemUiVisibility(II)V
     .annotation system Ldalvik/annotation/Throws;
         value = {
diff --git a/framework.jar.out/smali/com/android/internal/statusbar/IStatusBarService$Stub$Proxy.smali b/framework.jar.out/smali/com/android/internal/statusbar/IStatusBarService$Stub$Proxy.smali
index c242cb2..4c4a0bc 100644
--- a/framework.jar.out/smali/com/android/internal/statusbar/IStatusBarService$Stub$Proxy.smali
+++ b/framework.jar.out/smali/com/android/internal/statusbar/IStatusBarService$Stub$Proxy.smali
@@ -1060,6 +1060,89 @@
     throw v2
 .end method
 
+.method public setStatus(ILandroid/os/IBinder;Ljava/lang/String;Landroid/os/Bundle;)V
+    .locals 5
+    .parameter "what"
+    .parameter "token"
+    .parameter "action"
+    .parameter "ext"
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+
+    .prologue
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v0
+
+    .local v0, _data:Landroid/os/Parcel;
+    invoke-static {}, Landroid/os/Parcel;->obtain()Landroid/os/Parcel;
+
+    move-result-object v1
+
+    .local v1, _reply:Landroid/os/Parcel;
+    :try_start_0
+    const-string v2, "com.android.internal.statusbar.IStatusBarService"
+
+    invoke-virtual {v0, v2}, Landroid/os/Parcel;->writeInterfaceToken(Ljava/lang/String;)V
+
+    invoke-virtual {v0, p1}, Landroid/os/Parcel;->writeInt(I)V
+
+    invoke-virtual {v0, p2}, Landroid/os/Parcel;->writeStrongBinder(Landroid/os/IBinder;)V
+
+    invoke-virtual {v0, p3}, Landroid/os/Parcel;->writeString(Ljava/lang/String;)V
+
+    if-eqz p4, :cond_0
+
+    const/4 v2, 0x1
+
+    invoke-virtual {v0, v2}, Landroid/os/Parcel;->writeInt(I)V
+
+    const/4 v2, 0x0
+
+    invoke-virtual {p4, v0, v2}, Landroid/os/Bundle;->writeToParcel(Landroid/os/Parcel;I)V
+
+    :goto_0
+    iget-object v2, p0, Lcom/android/internal/statusbar/IStatusBarService$Stub$Proxy;->mRemote:Landroid/os/IBinder;
+
+    const/16 v3, 0x14
+
+    const/4 v4, 0x0
+
+    invoke-interface {v2, v3, v0, v1, v4}, Landroid/os/IBinder;->transact(ILandroid/os/Parcel;Landroid/os/Parcel;I)Z
+
+    invoke-virtual {v1}, Landroid/os/Parcel;->readException()V
+    :try_end_0
+    .catchall {:try_start_0 .. :try_end_0} :catchall_0
+
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    return-void
+
+    :cond_0
+    const/4 v2, 0x0
+
+    :try_start_1
+    invoke-virtual {v0, v2}, Landroid/os/Parcel;->writeInt(I)V
+    :try_end_1
+    .catchall {:try_start_1 .. :try_end_1} :catchall_0
+
+    goto :goto_0
+
+    :catchall_0
+    move-exception v2
+
+    invoke-virtual {v1}, Landroid/os/Parcel;->recycle()V
+
+    invoke-virtual {v0}, Landroid/os/Parcel;->recycle()V
+
+    throw v2
+.end method
+
 .method public setSystemUiVisibility(II)V
     .locals 5
     .parameter "vis"
diff --git a/framework.jar.out/smali/com/android/internal/statusbar/IStatusBarService$Stub.smali b/framework.jar.out/smali/com/android/internal/statusbar/IStatusBarService$Stub.smali
index 3953e1c..22b260b 100644
--- a/framework.jar.out/smali/com/android/internal/statusbar/IStatusBarService$Stub.smali
+++ b/framework.jar.out/smali/com/android/internal/statusbar/IStatusBarService$Stub.smali
@@ -58,6 +58,8 @@
 
 .field static final TRANSACTION_setImeWindowStatus:I = 0x8
 
+.field static final TRANSACTION_setStatus:I = 0x14
+
 .field static final TRANSACTION_setSystemUiVisibility:I = 0xf
 
 .field static final TRANSACTION_toggleRecentApps:I = 0x11
@@ -763,6 +765,61 @@
 
     goto/16 :goto_0
 
+    :sswitch_14
+    const-string v1, "com.android.internal.statusbar.IStatusBarService"
+
+    move-object/from16 v0, p2
+
+    invoke-virtual {v0, v1}, Landroid/os/Parcel;->enforceInterface(Ljava/lang/String;)V
+
+    invoke-virtual/range {p2 .. p2}, Landroid/os/Parcel;->readInt()I
+
+    move-result v2
+
+    .local v2, _arg0:I
+    invoke-virtual/range {p2 .. p2}, Landroid/os/Parcel;->readStrongBinder()Landroid/os/IBinder;
+
+    move-result-object v3
+
+    .local v3, _arg1:Landroid/os/IBinder;
+    invoke-virtual/range {p2 .. p2}, Landroid/os/Parcel;->readString()Ljava/lang/String;
+
+    move-result-object v4
+
+    .local v4, _arg2:Ljava/lang/String;
+    invoke-virtual/range {p2 .. p2}, Landroid/os/Parcel;->readInt()I
+
+    move-result v1
+
+    if-eqz v1, :cond_5
+
+    sget-object v1, Landroid/os/Bundle;->CREATOR:Landroid/os/Parcelable$Creator;
+
+    move-object/from16 v0, p2
+
+    invoke-interface {v1, v0}, Landroid/os/Parcelable$Creator;->createFromParcel(Landroid/os/Parcel;)Ljava/lang/Object;
+
+    move-result-object v5
+
+    check-cast v5, Landroid/os/Bundle;
+
+    .local v5, _arg3:Landroid/os/Bundle;
+    :goto_6
+    invoke-virtual {p0, v2, v3, v4, v5}, Lcom/android/internal/statusbar/IStatusBarService$Stub;->setStatus(ILandroid/os/IBinder;Ljava/lang/String;Landroid/os/Bundle;)V
+
+    invoke-virtual/range {p3 .. p3}, Landroid/os/Parcel;->writeNoException()V
+
+    const/4 v1, 0x1
+
+    goto/16 :goto_0
+
+    .end local v5           #_arg3:Landroid/os/Bundle;
+    :cond_5
+    const/4 v5, 0x0
+
+    .restart local v5       #_arg3:Landroid/os/Bundle;
+    goto :goto_6
+
     :sswitch_data_0
     .sparse-switch
         0x1 -> :sswitch_1
@@ -784,6 +841,7 @@
         0x11 -> :sswitch_11
         0x12 -> :sswitch_12
         0x13 -> :sswitch_13
+        0x14 -> :sswitch_14
         0x5f4e5446 -> :sswitch_0
     .end sparse-switch
 .end method
diff --git a/framework.jar.out/smali/com/android/internal/statusbar/IStatusBarService.smali b/framework.jar.out/smali/com/android/internal/statusbar/IStatusBarService.smali
index 7a73856..0878a19 100644
--- a/framework.jar.out/smali/com/android/internal/statusbar/IStatusBarService.smali
+++ b/framework.jar.out/smali/com/android/internal/statusbar/IStatusBarService.smali
@@ -163,6 +163,14 @@
     .end annotation
 .end method
 
+.method public abstract setStatus(ILandroid/os/IBinder;Ljava/lang/String;Landroid/os/Bundle;)V
+    .annotation system Ldalvik/annotation/Throws;
+        value = {
+            Landroid/os/RemoteException;
+        }
+    .end annotation
+.end method
+
 .method public abstract setSystemUiVisibility(II)V
     .annotation system Ldalvik/annotation/Throws;
         value = {
diff --git a/framework.jar.out/smali/com/android/internal/telephony/WapPushOverSms.smali b/framework.jar.out/smali/com/android/internal/telephony/WapPushOverSms.smali
index 40eeb62..389be37 100644
--- a/framework.jar.out/smali/com/android/internal/telephony/WapPushOverSms.smali
+++ b/framework.jar.out/smali/com/android/internal/telephony/WapPushOverSms.smali
@@ -441,11 +441,15 @@
 
     move-result v22
 
-    if-eqz v22, :goto_1
+    if-eqz v22, :cond_miui_0
 
     const/16 v22, -0x1
 
-    goto/16 :goto_0
+    return v22
+    ########### method end
+
+    :cond_miui_0
+    goto :goto_1
 
     .end local v6           #dataIndex:I
     .restart local v20       #wapAppId:Ljava/lang/String;
diff --git a/framework.jar.out/smali/com/android/internal/view/menu/ListMenuItemView.smali b/framework.jar.out/smali/com/android/internal/view/menu/ListMenuItemView.smali
index d4e94ae..bc37b7a 100644
--- a/framework.jar.out/smali/com/android/internal/view/menu/ListMenuItemView.smali
+++ b/framework.jar.out/smali/com/android/internal/view/menu/ListMenuItemView.smali
@@ -148,6 +148,17 @@
 
     iget-object v1, p0, Lcom/android/internal/view/menu/ListMenuItemView;->mCheckBox:Landroid/widget/CheckBox;
 
+    invoke-static {p0, v1}, Lcom/android/internal/view/menu/ListMenuItemView$Injector;->insertCheckBox(Lcom/android/internal/view/menu/ListMenuItemView;Landroid/widget/CheckBox;)Z
+
+    move-result v1
+
+    if-eqz v1, :cond_miui_0
+
+    return-void
+
+    :cond_miui_0
+    iget-object v1, p0, Lcom/android/internal/view/menu/ListMenuItemView;->mCheckBox:Landroid/widget/CheckBox;
+
     invoke-virtual {p0, v1}, Lcom/android/internal/view/menu/ListMenuItemView;->addView(Landroid/view/View;)V
 
     return-void
@@ -204,6 +215,17 @@
 
     iget-object v1, p0, Lcom/android/internal/view/menu/ListMenuItemView;->mRadioButton:Landroid/widget/RadioButton;
 
+    invoke-static {p0, v1}, Lcom/android/internal/view/menu/ListMenuItemView$Injector;->insertRadioButton(Lcom/android/internal/view/menu/ListMenuItemView;Landroid/widget/RadioButton;)Z
+
+    move-result v1
+
+    if-eqz v1, :cond_miui_0
+
+    return-void
+
+    :cond_miui_0
+    iget-object v1, p0, Lcom/android/internal/view/menu/ListMenuItemView;->mRadioButton:Landroid/widget/RadioButton;
+
     invoke-virtual {p0, v1}, Lcom/android/internal/view/menu/ListMenuItemView;->addView(Landroid/view/View;)V
 
     return-void
@@ -442,6 +464,16 @@
 
     invoke-virtual {v0, v4}, Landroid/widget/CompoundButton;->setChecked(Z)V
 
+    iget-object v4, p0, Lcom/android/internal/view/menu/ListMenuItemView;->mTitleView:Landroid/widget/TextView;
+
+    iget-object v1, p0, Lcom/android/internal/view/menu/ListMenuItemView;->mItemData:Lcom/android/internal/view/menu/MenuItemImpl;
+
+    invoke-virtual {v1}, Lcom/android/internal/view/menu/MenuItemImpl;->isChecked()Z
+
+    move-result v1
+
+    invoke-static {v4, v1}, Lcom/android/internal/view/menu/ListMenuItemView$Injector;->checkTextColor(Landroid/widget/TextView;Z)V
+
     if-eqz p1, :cond_6
 
     const/4 v1, 0x0
@@ -540,6 +572,10 @@
     :goto_0
     invoke-virtual {v0, p1}, Landroid/widget/CompoundButton;->setChecked(Z)V
 
+    iget-object v1, p0, Lcom/android/internal/view/menu/ListMenuItemView;->mTitleView:Landroid/widget/TextView;
+
+    invoke-static {v1, p1}, Lcom/android/internal/view/menu/ListMenuItemView$Injector;->checkTextColor(Landroid/widget/TextView;Z)V
+
     return-void
 
     .end local v0           #compoundButton:Landroid/widget/CompoundButton;
diff --git a/framework.jar.out/smali/com/android/internal/view/menu/MenuBuilder.smali b/framework.jar.out/smali/com/android/internal/view/menu/MenuBuilder.smali
index 63ee36d..8c18930 100644
--- a/framework.jar.out/smali/com/android/internal/view/menu/MenuBuilder.smali
+++ b/framework.jar.out/smali/com/android/internal/view/menu/MenuBuilder.smali
@@ -2475,6 +2475,54 @@
     return v0
 .end method
 
+.method public miuiGetActionItems()Ljava/util/ArrayList;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .annotation system Ldalvik/annotation/Signature;
+        value = {
+            "()",
+            "Ljava/util/ArrayList",
+            "<",
+            "Lcom/android/internal/view/menu/MenuItemImpl;",
+            ">;"
+        }
+    .end annotation
+
+    .prologue
+    invoke-virtual {p0}, Lcom/android/internal/view/menu/MenuBuilder;->getActionItems()Ljava/util/ArrayList;
+
+    move-result-object v0
+
+    return-object v0
+.end method
+
+.method public miuiGetVisibleItems()Ljava/util/ArrayList;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .annotation system Ldalvik/annotation/Signature;
+        value = {
+            "()",
+            "Ljava/util/ArrayList",
+            "<",
+            "Lcom/android/internal/view/menu/MenuItemImpl;",
+            ">;"
+        }
+    .end annotation
+
+    .prologue
+    invoke-virtual {p0}, Lcom/android/internal/view/menu/MenuBuilder;->getVisibleItems()Ljava/util/ArrayList;
+
+    move-result-object v0
+
+    return-object v0
+.end method
+
 .method onItemActionRequestChanged(Lcom/android/internal/view/menu/MenuItemImpl;)V
     .locals 1
     .parameter "item"
diff --git a/framework.jar.out/smali/com/android/internal/widget/ActionBarContainer.smali b/framework.jar.out/smali/com/android/internal/widget/ActionBarContainer.smali
index eccfb71..3ae6739 100644
--- a/framework.jar.out/smali/com/android/internal/widget/ActionBarContainer.smali
+++ b/framework.jar.out/smali/com/android/internal/widget/ActionBarContainer.smali
@@ -136,20 +136,44 @@
     goto :goto_0
 .end method
 
-
-# virtual methods
-.method getActionBarBackground()Landroid/graphics/drawable/Drawable;
-    .locals 1
+.method private shouldPutTabsOnTop()Z
+    .locals 2
     .annotation build Landroid/annotation/MiuiHook;
         value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
     .end annotation
 
     .prologue
-    iget-object v0, p0, Lcom/android/internal/widget/ActionBarContainer;->mBackground:Landroid/graphics/drawable/Drawable;
+    const/4 v0, 0x0
 
-    return-object v0
+    iget-object v1, p0, Lcom/android/internal/widget/ActionBarContainer;->mContext:Landroid/content/Context;
+
+    invoke-static {v1}, Lmiui/util/UiUtils;->isV5Ui(Landroid/content/Context;)Z
+
+    move-result v1
+
+    if-eqz v1, :cond_1
+
+    :cond_0
+    :goto_0
+    return v0
+
+    :cond_1
+    iget-object v1, p0, Lcom/android/internal/widget/ActionBarContainer;->mActionBarView:Lcom/android/internal/widget/ActionBarView;
+
+    invoke-virtual {v1}, Lcom/android/internal/widget/ActionBarView;->getDisplayOptions()I
+
+    move-result v1
+
+    and-int/lit8 v1, v1, 0x2
+
+    if-nez v1, :cond_0
+
+    const/4 v0, 0x1
+
+    goto :goto_0
 .end method
 
+
 .method getActionBarView()Lcom/android/internal/widget/ActionBarView;
     .locals 1
     .annotation build Landroid/annotation/MiuiHook;
@@ -162,25 +186,25 @@
     return-object v0
 .end method
 
-.method getStackedBackground()Landroid/graphics/drawable/Drawable;
+.method public getTabContainer()Landroid/view/View;
     .locals 1
-    .annotation build Landroid/annotation/MiuiHook;
-        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
-    .end annotation
 
     .prologue
-    iget-object v0, p0, Lcom/android/internal/widget/ActionBarContainer;->mStackedBackground:Landroid/graphics/drawable/Drawable;
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarContainer;->mTabContainer:Landroid/view/View;
 
     return-object v0
 .end method
 
-.method public getTabContainer()Landroid/view/View;
+.method protected isSplit()Z
     .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
 
     .prologue
-    iget-object v0, p0, Lcom/android/internal/widget/ActionBarContainer;->mTabContainer:Landroid/view/View;
+    iget-boolean v0, p0, Lcom/android/internal/widget/ActionBarContainer;->mIsSplit:Z
 
-    return-object v0
+    return v0
 .end method
 
 .method public onDraw(Landroid/graphics/Canvas;)V
@@ -360,15 +384,11 @@
     move-result v7
 
     .local v7, tabHeight:I
-    iget-object v8, p0, Lcom/android/internal/widget/ActionBarContainer;->mActionBarView:Lcom/android/internal/widget/ActionBarView;
-
-    invoke-virtual {v8}, Lcom/android/internal/widget/ActionBarView;->getDisplayOptions()I
+    invoke-direct {p0}, Lcom/android/internal/widget/ActionBarContainer;->shouldPutTabsOnTop()Z
 
     move-result v8
 
-    and-int/lit8 v8, v8, 0x2
-
-    if-nez v8, :cond_7
+    if-eqz v8, :cond_7
 
     invoke-virtual {p0}, Lcom/android/internal/widget/ActionBarContainer;->getChildCount()I
 
@@ -572,7 +592,7 @@
 
     move-result v12
 
-    invoke-static {p0, v9, v10, v11, v12}, Lcom/android/internal/widget/ActionBarContainer$Injector;->setBounds(Lcom/android/internal/widget/ActionBarContainer;IIII)V
+    invoke-virtual {v8, v9, v10, v11, v12}, Landroid/graphics/drawable/Drawable;->setBounds(IIII)V
 
     const/4 v6, 0x1
 
@@ -703,19 +723,6 @@
     return v0
 .end method
 
-.method setIsStacked(Z)V
-    .locals 0
-    .parameter "value"
-    .annotation build Landroid/annotation/MiuiHook;
-        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
-    .end annotation
-
-    .prologue
-    iput-boolean p1, p0, Lcom/android/internal/widget/ActionBarContainer;->mIsStacked:Z
-
-    return-void
-.end method
-
 .method public setPrimaryBackground(Landroid/graphics/drawable/Drawable;)V
     .locals 0
     .parameter "bg"
diff --git a/framework.jar.out/smali/com/android/internal/widget/ActionBarContextView.smali b/framework.jar.out/smali/com/android/internal/widget/ActionBarContextView.smali
index 2dace78..ed365a6 100644
--- a/framework.jar.out/smali/com/android/internal/widget/ActionBarContextView.smali
+++ b/framework.jar.out/smali/com/android/internal/widget/ActionBarContextView.smali
@@ -162,6 +162,15 @@
 
     const/4 v5, 0x0
 
+    invoke-virtual {p0}, Lcom/android/internal/widget/ActionBarContextView;->miuiInitTitle()Z
+
+    move-result v3
+
+    if-eqz v3, :cond_miui_0
+
+    return-void
+
+    :cond_miui_0
     iget-object v3, p0, Lcom/android/internal/widget/ActionBarContextView;->mTitleLayout:Landroid/widget/LinearLayout;
 
     if-nez v3, :cond_1
@@ -677,6 +686,18 @@
     return-object v0
 .end method
 
+.method protected getAnimationMode()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Lcom/android/internal/widget/ActionBarContextView;->mAnimationMode:I
+
+    return v0
+.end method
+
 .method public getSubtitle()Ljava/lang/CharSequence;
     .locals 1
 
@@ -695,6 +716,42 @@
     return-object v0
 .end method
 
+.method public getTitleLayout()Landroid/widget/LinearLayout;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarContextView;->mTitleLayout:Landroid/widget/LinearLayout;
+
+    return-object v0
+.end method
+
+.method public getTitleStyleRes()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Lcom/android/internal/widget/ActionBarContextView;->mTitleStyleRes:I
+
+    return v0
+.end method
+
+.method public getTitleView()Landroid/widget/TextView;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarContextView;->mTitleView:Landroid/widget/TextView;
+
+    return-object v0
+.end method
+
 .method public hideOverflowMenu()Z
     .locals 1
 
@@ -983,6 +1040,18 @@
     return-void
 .end method
 
+.method protected miuiInitTitle()Z
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    const/4 v0, 0x0
+
+    return v0
+.end method
+
 .method public onAnimationCancel(Landroid/animation/Animator;)V
     .locals 0
     .parameter "animation"
@@ -1872,6 +1941,19 @@
     goto :goto_9
 .end method
 
+.method protected setAnimationMode(I)V
+    .locals 0
+    .parameter "mode"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iput p1, p0, Lcom/android/internal/widget/ActionBarContextView;->mAnimationMode:I
+
+    return-void
+.end method
+
 .method public setContentHeight(I)V
     .locals 0
     .parameter "height"
@@ -2089,6 +2171,19 @@
     return-void
 .end method
 
+.method public setTitleLayout(Landroid/widget/LinearLayout;)V
+    .locals 0
+    .parameter "titleLayout"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iput-object p1, p0, Lcom/android/internal/widget/ActionBarContextView;->mTitleLayout:Landroid/widget/LinearLayout;
+
+    return-void
+.end method
+
 .method public setTitleOptional(Z)V
     .locals 1
     .parameter "titleOptional"
@@ -2106,6 +2201,19 @@
     return-void
 .end method
 
+.method public setTitleView(Landroid/widget/TextView;)V
+    .locals 0
+    .parameter "titleView"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iput-object p1, p0, Lcom/android/internal/widget/ActionBarContextView;->mTitleView:Landroid/widget/TextView;
+
+    return-void
+.end method
+
 .method public shouldDelayChildPressedState()Z
     .locals 1
 
diff --git a/framework.jar.out/smali/com/android/internal/widget/ActionBarView$ExpandedActionViewMenuPresenter.smali b/framework.jar.out/smali/com/android/internal/widget/ActionBarView$ExpandedActionViewMenuPresenter.smali
index ed2d1f0..726b8f3 100644
--- a/framework.jar.out/smali/com/android/internal/widget/ActionBarView$ExpandedActionViewMenuPresenter.smali
+++ b/framework.jar.out/smali/com/android/internal/widget/ActionBarView$ExpandedActionViewMenuPresenter.smali
@@ -137,8 +137,8 @@
 
     iget-object v0, p0, Lcom/android/internal/widget/ActionBarView$ExpandedActionViewMenuPresenter;->this$0:Lcom/android/internal/widget/ActionBarView;
 
-    #getter for: Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
-    invoke-static {v0}, Lcom/android/internal/widget/ActionBarView;->access$800(Lcom/android/internal/widget/ActionBarView;)Landroid/widget/LinearLayout;
+    #getter for: Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
+    invoke-static {v0}, Lcom/android/internal/widget/ActionBarView;->access$800(Lcom/android/internal/widget/ActionBarView;)Landroid/view/ViewGroup;
 
     move-result-object v0
 
@@ -261,12 +261,12 @@
     :cond_6
     iget-object v0, p0, Lcom/android/internal/widget/ActionBarView$ExpandedActionViewMenuPresenter;->this$0:Lcom/android/internal/widget/ActionBarView;
 
-    #getter for: Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
-    invoke-static {v0}, Lcom/android/internal/widget/ActionBarView;->access$800(Lcom/android/internal/widget/ActionBarView;)Landroid/widget/LinearLayout;
+    #getter for: Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
+    invoke-static {v0}, Lcom/android/internal/widget/ActionBarView;->access$800(Lcom/android/internal/widget/ActionBarView;)Landroid/view/ViewGroup;
 
     move-result-object v0
 
-    invoke-virtual {v0, v2}, Landroid/widget/LinearLayout;->setVisibility(I)V
+    invoke-virtual {v0, v2}, Landroid/view/ViewGroup;->setVisibility(I)V
 
     goto :goto_0
 .end method
@@ -380,8 +380,8 @@
 
     iget-object v0, p0, Lcom/android/internal/widget/ActionBarView$ExpandedActionViewMenuPresenter;->this$0:Lcom/android/internal/widget/ActionBarView;
 
-    #getter for: Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
-    invoke-static {v0}, Lcom/android/internal/widget/ActionBarView;->access$800(Lcom/android/internal/widget/ActionBarView;)Landroid/widget/LinearLayout;
+    #getter for: Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
+    invoke-static {v0}, Lcom/android/internal/widget/ActionBarView;->access$800(Lcom/android/internal/widget/ActionBarView;)Landroid/view/ViewGroup;
 
     move-result-object v0
 
@@ -389,12 +389,12 @@
 
     iget-object v0, p0, Lcom/android/internal/widget/ActionBarView$ExpandedActionViewMenuPresenter;->this$0:Lcom/android/internal/widget/ActionBarView;
 
-    #getter for: Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
-    invoke-static {v0}, Lcom/android/internal/widget/ActionBarView;->access$800(Lcom/android/internal/widget/ActionBarView;)Landroid/widget/LinearLayout;
+    #getter for: Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
+    invoke-static {v0}, Lcom/android/internal/widget/ActionBarView;->access$800(Lcom/android/internal/widget/ActionBarView;)Landroid/view/ViewGroup;
 
     move-result-object v0
 
-    invoke-virtual {v0, v3}, Landroid/widget/LinearLayout;->setVisibility(I)V
+    invoke-virtual {v0, v3}, Landroid/view/ViewGroup;->setVisibility(I)V
 
     :cond_2
     iget-object v0, p0, Lcom/android/internal/widget/ActionBarView$ExpandedActionViewMenuPresenter;->this$0:Lcom/android/internal/widget/ActionBarView;
diff --git a/framework.jar.out/smali/com/android/internal/widget/ActionBarView.smali b/framework.jar.out/smali/com/android/internal/widget/ActionBarView.smali
index 2d8f553..887891b 100644
--- a/framework.jar.out/smali/com/android/internal/widget/ActionBarView.smali
+++ b/framework.jar.out/smali/com/android/internal/widget/ActionBarView.smali
@@ -67,6 +67,12 @@
 
 .field private mMaxHomeSlop:I
 
+.field mMenuPresenterCallback:Lcom/android/internal/view/menu/MenuPresenter$Callback;
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_FIELD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+.end field
+
 .field private final mNavItemSelectedListener:Landroid/widget/AdapterView$OnItemSelectedListener;
 
 .field private mNavigationMode:I
@@ -97,7 +103,11 @@
 
 .field private mTitle:Ljava/lang/CharSequence;
 
-.field private mTitleLayout:Landroid/widget/LinearLayout;
+.field private mTitleLayout:Landroid/view/ViewGroup;
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->CHANGE_CODE:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+.end field
 
 .field private mTitleStyleRes:I
 
@@ -788,12 +798,12 @@
     return-object v0
 .end method
 
-.method static synthetic access$800(Lcom/android/internal/widget/ActionBarView;)Landroid/widget/LinearLayout;
+.method static synthetic access$800(Lcom/android/internal/widget/ActionBarView;)Landroid/view/ViewGroup;
     .locals 1
     .parameter "x0"
 
     .prologue
-    iget-object v0, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     return-object v0
 .end method
@@ -864,7 +874,16 @@
 
     const/4 v6, 0x0
 
-    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    invoke-virtual {p0}, Lcom/android/internal/widget/ActionBarView;->miuiInitTitle()Z
+
+    move-result v4
+
+    if-eqz v4, :cond_miui_0
+
+    return-void
+
+    :cond_miui_0
+    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     if-nez v4, :cond_4
 
@@ -885,13 +904,13 @@
 
     check-cast v4, Landroid/widget/LinearLayout;
 
-    iput-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iput-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
-    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     const v8, 0x1020242
 
-    invoke-virtual {v4, v8}, Landroid/widget/LinearLayout;->findViewById(I)Landroid/view/View;
+    invoke-virtual {v4, v8}, Landroid/view/ViewGroup;->findViewById(I)Landroid/view/View;
 
     move-result-object v4
 
@@ -899,11 +918,11 @@
 
     iput-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleView:Landroid/widget/TextView;
 
-    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     const v8, 0x1020243
 
-    invoke-virtual {v4, v8}, Landroid/widget/LinearLayout;->findViewById(I)Landroid/view/View;
+    invoke-virtual {v4, v8}, Landroid/view/ViewGroup;->findViewById(I)Landroid/view/View;
 
     move-result-object v4
 
@@ -911,21 +930,21 @@
 
     iput-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mSubtitleView:Landroid/widget/TextView;
 
-    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     const v8, 0x102023b
 
-    invoke-virtual {v4, v8}, Landroid/widget/LinearLayout;->findViewById(I)Landroid/view/View;
+    invoke-virtual {v4, v8}, Landroid/view/ViewGroup;->findViewById(I)Landroid/view/View;
 
     move-result-object v4
 
     iput-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleUpView:Landroid/view/View;
 
-    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     iget-object v8, p0, Lcom/android/internal/widget/ActionBarView;->mUpClickListener:Landroid/view/View$OnClickListener;
 
-    invoke-virtual {v4, v8}, Landroid/widget/LinearLayout;->setOnClickListener(Landroid/view/View$OnClickListener;)V
+    invoke-virtual {v4, v8}, Landroid/view/ViewGroup;->setOnClickListener(Landroid/view/View$OnClickListener;)V
 
     iget v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleStyleRes:I
 
@@ -1016,7 +1035,7 @@
     :goto_3
     invoke-virtual {v8, v4}, Landroid/view/View;->setVisibility(I)V
 
-    iget-object v8, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v8, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     if-eqz v0, :cond_c
 
@@ -1025,23 +1044,23 @@
     move v4, v5
 
     :goto_4
-    invoke-virtual {v8, v4}, Landroid/widget/LinearLayout;->setEnabled(Z)V
+    invoke-virtual {v8, v4}, Landroid/view/ViewGroup;->setEnabled(Z)V
 
-    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     if-eqz v0, :cond_d
 
     if-eqz v3, :cond_d
 
     :goto_5
-    invoke-virtual {v4, v5}, Landroid/widget/LinearLayout;->setClickable(Z)V
+    invoke-virtual {v4, v5}, Landroid/view/ViewGroup;->setClickable(Z)V
 
     .end local v0           #homeAsUp:Z
     .end local v1           #inflater:Landroid/view/LayoutInflater;
     .end local v2           #showHome:Z
     .end local v3           #showTitleUp:Z
     :cond_4
-    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     invoke-virtual {p0, v4}, Lcom/android/internal/widget/ActionBarView;->addView(Landroid/view/View;)V
 
@@ -1066,9 +1085,9 @@
     if-eqz v4, :cond_6
 
     :cond_5
-    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
-    invoke-virtual {v4, v7}, Landroid/widget/LinearLayout;->setVisibility(I)V
+    invoke-virtual {v4, v7}, Landroid/view/ViewGroup;->setVisibility(I)V
 
     :cond_6
     return-void
@@ -1161,12 +1180,12 @@
 
     .local v0, visible:Z
     :goto_0
-    iget-object v2, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v2, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     if-eqz v0, :cond_4
 
     :goto_1
-    invoke-virtual {v2, v1}, Landroid/widget/LinearLayout;->setVisibility(I)V
+    invoke-virtual {v2, v1}, Landroid/view/ViewGroup;->setVisibility(I)V
 
     .end local v0           #visible:Z
     :cond_1
@@ -1307,6 +1326,18 @@
     return v0
 .end method
 
+.method public getExpandedActionView()Landroid/view/View;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarView;->mExpandedActionView:Landroid/view/View;
+
+    return-object v0
+.end method
+
 .method public getNavigationMode()I
     .locals 1
 
@@ -1325,6 +1356,42 @@
     return-object v0
 .end method
 
+.method public getSubtitleStyleRes()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Lcom/android/internal/widget/ActionBarView;->mSubtitleStyleRes:I
+
+    return v0
+.end method
+
+.method public getSubtitleView()Landroid/widget/TextView;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarView;->mSubtitleView:Landroid/widget/TextView;
+
+    return-object v0
+.end method
+
+.method public getTabScrollView()Lcom/android/internal/widget/ScrollingTabContainerView;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarView;->mTabScrollView:Lcom/android/internal/widget/ScrollingTabContainerView;
+
+    return-object v0
+.end method
+
 .method public getTitle()Ljava/lang/CharSequence;
     .locals 1
 
@@ -1334,6 +1401,54 @@
     return-object v0
 .end method
 
+.method public getTitleLayout()Landroid/view/ViewGroup;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
+
+    return-object v0
+.end method
+
+.method public getTitleStyleRes()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Lcom/android/internal/widget/ActionBarView;->mTitleStyleRes:I
+
+    return v0
+.end method
+
+.method public getTitleView()Landroid/widget/TextView;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarView;->mTitleView:Landroid/widget/TextView;
+
+    return-object v0
+.end method
+
+.method public getUpClickListener()Landroid/view/View$OnClickListener;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarView;->mUpClickListener:Landroid/view/View$OnClickListener;
+
+    return-object v0
+.end method
+
 .method public hasEmbeddedTabs()Z
     .locals 1
 
@@ -1466,6 +1581,22 @@
     return v0
 .end method
 
+.method protected miuiInitTitle()Z
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarView;->mContext:Landroid/content/Context;
+
+    invoke-static {v0}, Lmiui/util/UiUtils;->isV5Ui(Landroid/content/Context;)Z
+
+    move-result v0
+
+    return v0
+.end method
+
 .method protected onConfigurationChanged(Landroid/content/res/Configuration;)V
     .locals 3
     .parameter "newConfig"
@@ -1481,24 +1612,24 @@
 
     iput-object v2, p0, Lcom/android/internal/widget/ActionBarView;->mTitleUpView:Landroid/view/View;
 
-    iget-object v1, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v1, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     if-eqz v1, :cond_0
 
-    iget-object v1, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v1, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
-    invoke-virtual {v1}, Landroid/widget/LinearLayout;->getParent()Landroid/view/ViewParent;
+    invoke-virtual {v1}, Landroid/view/ViewGroup;->getParent()Landroid/view/ViewParent;
 
     move-result-object v1
 
     if-ne v1, p0, :cond_0
 
-    iget-object v1, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v1, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     invoke-virtual {p0, v1}, Lcom/android/internal/widget/ActionBarView;->removeView(Landroid/view/View;)V
 
     :cond_0
-    iput-object v2, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iput-object v2, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     iget v1, p0, Lcom/android/internal/widget/ActionBarView;->mDisplayOptions:I
 
@@ -1746,7 +1877,7 @@
 
     move-object/from16 v0, p0
 
-    iget-object v0, v0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v0, v0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     move-object/from16 v30, v0
 
@@ -1754,11 +1885,11 @@
 
     move-object/from16 v0, p0
 
-    iget-object v0, v0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v0, v0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     move-object/from16 v30, v0
 
-    invoke-virtual/range {v30 .. v30}, Landroid/widget/LinearLayout;->getVisibility()I
+    invoke-virtual/range {v30 .. v30}, Landroid/view/ViewGroup;->getVisibility()I
 
     move-result v30
 
@@ -1788,7 +1919,7 @@
 
     move-object/from16 v0, p0
 
-    iget-object v0, v0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v0, v0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     move-object/from16 v30, v0
 
@@ -3144,7 +3275,7 @@
     :cond_9
     move-object/from16 v0, p0
 
-    iget-object v0, v0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v0, v0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     move-object/from16 v40, v0
 
@@ -3152,11 +3283,11 @@
 
     move-object/from16 v0, p0
 
-    iget-object v0, v0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v0, v0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     move-object/from16 v40, v0
 
-    invoke-virtual/range {v40 .. v40}, Landroid/widget/LinearLayout;->getVisibility()I
+    invoke-virtual/range {v40 .. v40}, Landroid/view/ViewGroup;->getVisibility()I
 
     move-result v40
 
@@ -3459,7 +3590,7 @@
 
     move-object/from16 v0, p0
 
-    iget-object v0, v0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v0, v0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     move-object/from16 v40, v0
 
@@ -3493,11 +3624,11 @@
 
     move-object/from16 v0, p0
 
-    iget-object v0, v0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v0, v0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     move-object/from16 v41, v0
 
-    invoke-virtual/range {v41 .. v41}, Landroid/widget/LinearLayout;->getMeasuredWidth()I
+    invoke-virtual/range {v41 .. v41}, Landroid/view/ViewGroup;->getMeasuredWidth()I
 
     move-result v41
 
@@ -4124,6 +4255,52 @@
     return-object v0
 .end method
 
+.method public onWindowHide()V
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarView;->mSplitView:Lcom/android/internal/widget/ActionBarContainer;
+
+    instance-of v0, v0, Lcom/miui/internal/v5/widget/ActionBarContainer;
+
+    if-eqz v0, :cond_0
+
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarView;->mSplitView:Lcom/android/internal/widget/ActionBarContainer;
+
+    check-cast v0, Lcom/miui/internal/v5/widget/ActionBarContainer;
+
+    invoke-virtual {v0}, Lcom/miui/internal/v5/widget/ActionBarContainer;->onWindowHide()V
+
+    :cond_0
+    return-void
+.end method
+
+.method public onWindowShow()V
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarView;->mSplitView:Lcom/android/internal/widget/ActionBarContainer;
+
+    instance-of v0, v0, Lcom/miui/internal/v5/widget/ActionBarContainer;
+
+    if-eqz v0, :cond_0
+
+    iget-object v0, p0, Lcom/android/internal/widget/ActionBarView;->mSplitView:Lcom/android/internal/widget/ActionBarContainer;
+
+    check-cast v0, Lcom/miui/internal/v5/widget/ActionBarContainer;
+
+    invoke-virtual {v0}, Lcom/miui/internal/v5/widget/ActionBarContainer;->onWindowShow()V
+
+    :cond_0
+    return-void
+.end method
+
 .method public setCallback(Landroid/app/ActionBar$OnNavigationListener;)V
     .locals 0
     .parameter "callback"
@@ -4144,6 +4321,19 @@
     return-void
 .end method
 
+.method protected setCollapsed(Z)V
+    .locals 0
+    .parameter "collapsed"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iput-boolean p1, p0, Lcom/android/internal/widget/ActionBarView;->mIsCollapsed:Z
+
+    return-void
+.end method
+
 .method public setContextView(Lcom/android/internal/widget/ActionBarContextView;)V
     .locals 0
     .parameter "view"
@@ -4310,7 +4500,7 @@
 
     :cond_2
     :goto_6
-    iget-object v9, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v9, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     if-eqz v9, :cond_4
 
@@ -4330,6 +4520,10 @@
     :goto_7
     iget-object v9, p0, Lcom/android/internal/widget/ActionBarView;->mTitleUpView:Landroid/view/View;
 
+    if-eqz v9, :cond_miui_0
+
+    iget-object v9, p0, Lcom/android/internal/widget/ActionBarView;->mTitleUpView:Landroid/view/View;
+
     if-nez v4, :cond_3
 
     if-eqz v1, :cond_e
@@ -4340,7 +4534,8 @@
     :goto_8
     invoke-virtual {v9, v7}, Landroid/view/View;->setVisibility(I)V
 
-    iget-object v9, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    :cond_miui_0
+    iget-object v9, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     if-nez v4, :cond_f
 
@@ -4349,16 +4544,16 @@
     move v7, v8
 
     :goto_9
-    invoke-virtual {v9, v7}, Landroid/widget/LinearLayout;->setEnabled(Z)V
+    invoke-virtual {v9, v7}, Landroid/view/ViewGroup;->setEnabled(Z)V
 
-    iget-object v7, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v7, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     if-nez v4, :cond_10
 
     if-eqz v1, :cond_10
 
     :goto_a
-    invoke-virtual {v7, v8}, Landroid/widget/LinearLayout;->setClickable(Z)V
+    invoke-virtual {v7, v8}, Landroid/view/ViewGroup;->setClickable(Z)V
 
     .end local v1           #homeAsUp:Z
     :cond_4
@@ -4441,7 +4636,7 @@
 
     .end local v2           #logoVis:Z
     :cond_c
-    iget-object v9, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v9, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     invoke-virtual {p0, v9}, Lcom/android/internal/widget/ActionBarView;->removeView(Landroid/view/View;)V
 
@@ -4871,11 +5066,11 @@
 
     if-nez v4, :cond_3
 
-    new-instance v4, Lcom/android/internal/view/menu/ActionMenuPresenter;
+    iget-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mContext:Landroid/content/Context;
 
-    iget-object v5, p0, Lcom/android/internal/widget/ActionBarView;->mContext:Landroid/content/Context;
+    invoke-static {v4}, Lcom/android/internal/widget/ActionBarView$Injector;->createActionMenuPresenter(Landroid/content/Context;)Lcom/android/internal/view/menu/ActionMenuPresenter;
 
-    invoke-direct {v4, v5}, Lcom/android/internal/view/menu/ActionMenuPresenter;-><init>(Landroid/content/Context;)V
+    move-result-object v4
 
     iput-object v4, p0, Lcom/android/internal/widget/ActionBarView;->mActionMenuPresenter:Lcom/android/internal/view/menu/ActionMenuPresenter;
 
@@ -5419,12 +5614,12 @@
 
     .local v0, visible:Z
     :goto_1
-    iget-object v1, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/widget/LinearLayout;
+    iget-object v1, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
 
     if-eqz v0, :cond_4
 
     :goto_2
-    invoke-virtual {v1, v2}, Landroid/widget/LinearLayout;->setVisibility(I)V
+    invoke-virtual {v1, v2}, Landroid/view/ViewGroup;->setVisibility(I)V
 
     .end local v0           #visible:Z
     :cond_1
@@ -5447,6 +5642,19 @@
     goto :goto_2
 .end method
 
+.method public setSubtitleView(Landroid/widget/TextView;)V
+    .locals 0
+    .parameter "subTitleView"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iput-object p1, p0, Lcom/android/internal/widget/ActionBarView;->mSubtitleView:Landroid/widget/TextView;
+
+    return-void
+.end method
+
 .method public setTitle(Ljava/lang/CharSequence;)V
     .locals 1
     .parameter "title"
@@ -5461,6 +5669,32 @@
     return-void
 .end method
 
+.method public setTitleLayout(Landroid/view/ViewGroup;)V
+    .locals 0
+    .parameter "titleLayout"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iput-object p1, p0, Lcom/android/internal/widget/ActionBarView;->mTitleLayout:Landroid/view/ViewGroup;
+
+    return-void
+.end method
+
+.method public setTitleView(Landroid/widget/TextView;)V
+    .locals 0
+    .parameter "titleView"
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iput-object p1, p0, Lcom/android/internal/widget/ActionBarView;->mTitleView:Landroid/widget/TextView;
+
+    return-void
+.end method
+
 .method public setWindowCallback(Landroid/view/Window$Callback;)V
     .locals 0
     .parameter "cb"
diff --git a/framework.jar.out/smali/com/android/internal/widget/LockPatternUtils.smali b/framework.jar.out/smali/com/android/internal/widget/LockPatternUtils.smali
index 957b0c6..db67cda 100644
--- a/framework.jar.out/smali/com/android/internal/widget/LockPatternUtils.smali
+++ b/framework.jar.out/smali/com/android/internal/widget/LockPatternUtils.smali
@@ -360,7 +360,7 @@
 
     const-string v3, "lockscreen.password_salt"
 
-    invoke-direct {p0, v3, v1, v2}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
+    invoke-virtual {p0, v3, v1, v2}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
 
     const-string v3, "LockPatternUtils"
 
@@ -647,7 +647,7 @@
     goto :goto_0
 .end method
 
-.method private setLong(Ljava/lang/String;J)V
+.method protected setLong(Ljava/lang/String;J)V
     .locals 4
     .parameter "secureSettingKey"
     .parameter "value"
@@ -1138,11 +1138,11 @@
 
     const-string v0, "lockscreen.password_type"
 
-    invoke-direct {p0, v0, v2, v3}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
+    invoke-virtual {p0, v0, v2, v3}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
 
     const-string v0, "lockscreen.password_type_alternate"
 
-    invoke-direct {p0, v0, v2, v3}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
+    invoke-virtual {p0, v0, v2, v3}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
 
     return-void
 .end method
@@ -2392,9 +2392,15 @@
 .end method
 
 .method public reportSuccessfulPasswordAttempt()V
-    .locals 1
+    .locals 3
 
     .prologue
+    const-string v0, "lockscreen.lockoutattemptdeadline"
+
+    const-wide/16 v1, 0x0
+
+    invoke-virtual {p0, v0, v1, v2}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
+
     invoke-virtual {p0}, Lcom/android/internal/widget/LockPatternUtils;->getDevicePolicyManager()Landroid/app/admin/DevicePolicyManager;
 
     move-result-object v0
@@ -2525,7 +2531,7 @@
 
     move-object/from16 v0, p0
 
-    invoke-direct {v0, v3, v11, v12}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
+    invoke-virtual {v0, v3, v11, v12}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
 
     if-eqz v21, :cond_5
 
@@ -2775,7 +2781,7 @@
 
     move-object/from16 v0, p0
 
-    invoke-direct {v0, v3, v11, v12}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
+    invoke-virtual {v0, v3, v11, v12}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
 
     const-string v3, "lockscreen.password_type_alternate"
 
@@ -2791,7 +2797,7 @@
 
     move-object/from16 v0, p0
 
-    invoke-direct {v0, v3, v11, v12}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
+    invoke-virtual {v0, v3, v11, v12}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
 
     invoke-direct/range {p0 .. p0}, Lcom/android/internal/widget/LockPatternUtils;->finishBiometricWeak()V
 
@@ -3002,7 +3008,7 @@
 
     const-wide/32 v2, 0x10000
 
-    invoke-direct {p0, v1, v2, v3}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
+    invoke-virtual {p0, v1, v2, v3}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
 
     const/high16 v1, 0x1
 
@@ -3036,13 +3042,13 @@
 
     const-wide/32 v2, 0x8000
 
-    invoke-direct {p0, v1, v2, v3}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
+    invoke-virtual {p0, v1, v2, v3}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
 
     const-string v1, "lockscreen.password_type_alternate"
 
     const-wide/32 v2, 0x10000
 
-    invoke-direct {p0, v1, v2, v3}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
+    invoke-virtual {p0, v1, v2, v3}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
 
     invoke-direct {p0}, Lcom/android/internal/widget/LockPatternUtils;->finishBiometricWeak()V
 
@@ -3221,7 +3227,7 @@
     :goto_0
     const-string v4, "lock_biometric_weak_flags"
 
-    invoke-direct {p0, v4, v2, v3}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
+    invoke-virtual {p0, v4, v2, v3}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
 
     return-void
 
@@ -3286,7 +3292,7 @@
     const-wide/16 v0, 0x1
 
     :goto_0
-    invoke-direct {p0, v2, v0, v1}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
+    invoke-virtual {p0, v2, v0, v1}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
 
     return-void
 
@@ -3311,7 +3317,7 @@
     .local v0, deadline:J
     const-string v2, "lockscreen.lockoutattemptdeadline"
 
-    invoke-direct {p0, v2, v0, v1}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
+    invoke-virtual {p0, v2, v0, v1}, Lcom/android/internal/widget/LockPatternUtils;->setLong(Ljava/lang/String;J)V
 
     return-wide v0
 .end method
diff --git a/framework.jar.out/smali/com/android/internal/widget/ScrollingTabContainerView$TabClickListener.smali b/framework.jar.out/smali/com/android/internal/widget/ScrollingTabContainerView$TabClickListener.smali
index 908a927..6f20984 100644
--- a/framework.jar.out/smali/com/android/internal/widget/ScrollingTabContainerView$TabClickListener.smali
+++ b/framework.jar.out/smali/com/android/internal/widget/ScrollingTabContainerView$TabClickListener.smali
@@ -111,5 +111,9 @@
 
     .end local v0           #child:Landroid/view/View;
     :cond_1
+    iget-object v4, p0, Lcom/android/internal/widget/ScrollingTabContainerView$TabClickListener;->this$0:Lcom/android/internal/widget/ScrollingTabContainerView;
+
+    invoke-static {v4, p1}, Lcom/android/internal/widget/ScrollingTabContainerView$Injector;->onTabViewClick(Lcom/android/internal/widget/ScrollingTabContainerView;Landroid/view/View;)V
+
     return-void
 .end method
diff --git a/framework.jar.out/smali/com/android/internal/widget/ScrollingTabContainerView.smali b/framework.jar.out/smali/com/android/internal/widget/ScrollingTabContainerView.smali
index ec66cda..3368c1c 100644
--- a/framework.jar.out/smali/com/android/internal/widget/ScrollingTabContainerView.smali
+++ b/framework.jar.out/smali/com/android/internal/widget/ScrollingTabContainerView.smali
@@ -181,7 +181,7 @@
     .end annotation
 
     .prologue
-    new-instance v0, Lcom/android/internal/widget/MiuiTabLayout;
+    new-instance v0, Landroid/widget/LinearLayout;
 
     invoke-virtual {p0}, Lcom/android/internal/widget/ScrollingTabContainerView;->getContext()Landroid/content/Context;
 
@@ -191,7 +191,7 @@
 
     const v3, 0x10102f4
 
-    invoke-direct {v0, v1, v2, v3}, Lcom/android/internal/widget/MiuiTabLayout;-><init>(Landroid/content/Context;Landroid/util/AttributeSet;I)V
+    invoke-direct {v0, v1, v2, v3}, Landroid/widget/LinearLayout;-><init>(Landroid/content/Context;Landroid/util/AttributeSet;I)V
 
     .local v0, tabLayout:Landroid/widget/LinearLayout;
     const/4 v1, 0x1
@@ -670,6 +670,30 @@
     goto :goto_0
 .end method
 
+.method protected getSelectedTabIndex()I
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget v0, p0, Lcom/android/internal/widget/ScrollingTabContainerView;->mSelectedTabIndex:I
+
+    return v0
+.end method
+
+.method protected getTabLayout()Landroid/widget/LinearLayout;
+    .locals 1
+    .annotation build Landroid/annotation/MiuiHook;
+        value = .enum Landroid/annotation/MiuiHook$MiuiHookType;->NEW_METHOD:Landroid/annotation/MiuiHook$MiuiHookType;
+    .end annotation
+
+    .prologue
+    iget-object v0, p0, Lcom/android/internal/widget/ScrollingTabContainerView;->mTabLayout:Landroid/widget/LinearLayout;
+
+    return-object v0
+.end method
+
 .method public onAttachedToWindow()V
     .locals 1
 
diff --git a/framework.jar.out/smali/com/android/internal/widget/multiwaveview/GlowPadView$AnimationBundle.smali b/framework.jar.out/smali/com/android/internal/widget/multiwaveview/GlowPadView$AnimationBundle.smali
index b5450c1..4d00f0f 100644
--- a/framework.jar.out/smali/com/android/internal/widget/multiwaveview/GlowPadView$AnimationBundle.smali
+++ b/framework.jar.out/smali/com/android/internal/widget/multiwaveview/GlowPadView$AnimationBundle.smali
@@ -38,7 +38,7 @@
 
 
 # direct methods
-.method private constructor <init>(Lcom/android/internal/widget/multiwaveview/GlowPadView;)V
+.method constructor <init>(Lcom/android/internal/widget/multiwaveview/GlowPadView;)V
     .locals 0
     .parameter
 
-- 
1.7.9.5

